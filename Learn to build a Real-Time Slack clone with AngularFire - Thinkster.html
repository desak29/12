<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/6292180984.js" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/visits.json" defer="true" async=""></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/nr-885.js"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/mixpanel-2-latest.js" async="" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/analytics.js" async="" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/amplitude-2.js" async="" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/fbevents.js" async=""></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/conversion_async.js" async="" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/gtm.js" async=""></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/546e6b25c2b687f594000007.js" async="" type="text/javascript"></script><script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/analytics_002.js" async="" type="text/javascript"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"6292180984","applicationID":"11379187","transactionName":"cw5XTUYJVV5WRhsBWEUTSlxHSUpaXEM=","queueTime":0,"applicationTime":28,"agent":""}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({QJf3ax:[function(e,t){function n(){}function r(e){function t(e){return e&&e instanceof n?e:e?a(e,i,o):o()}function s(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,f=0;u>f;f++)a[f].apply(i,r);var s=c[w[n]];return s&&s.push([h,n,r,i]),i}function p(e,t){g[e]=l(e).concat(t)}function l(e){return g[e]||[]}function d(e){return f[e]=f[e]||r(s)}function v(e,t){u(e,function(e,n){t=t||"feature",w[n]=t,t in c||(c[t]=[])})}var g={},w={},h={on:p,emit:s,get:d,listeners:l,context:t,buffer:v};return h}function o(){return new n}var i="nr@context",a=e("gos"),u=e(1),c={},f={},s=t.exports=r();s.backlog=c},{1:12,gos:"7eSDFh"}],ee:[function(e,t){t.exports=e("QJf3ax")},{}],3:[function(e,t){function n(e,t){return function(){r(e,[(new Date).getTime()].concat(i(arguments)),null,t)}}var r=e("handle"),o=e(1),i=e(2);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var a=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],u=["addPageAction"],c="api-";o(a,function(e,t){newrelic[t]=n(c+t,"api")}),o(u,function(e,t){newrelic[t]=n(c+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),r("err",[e,(new Date).getTime()])}},{1:12,2:13,handle:"D5DuLP"}],gos:[function(e,t){t.exports=e("7eSDFh")},{}],"7eSDFh":[function(e,t){function n(e,t,n){if(r.call(e,t))return e[t];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return e[t]=o,o}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],handle:[function(e,t){t.exports=e("D5DuLP")},{}],D5DuLP:[function(e,t){function n(e,t,n,o){r.buffer([e],o),r.emit(e,t,n)}var r=e("ee").get("handle");t.exports=n,n.ee=r},{ee:"QJf3ax"}],XL7HBI:[function(e,t){function n(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:i(e,o,function(){return r++})}var r=1,o="nr@id",i=e("gos");t.exports=n},{gos:"7eSDFh"}],id:[function(e,t){t.exports=e("XL7HBI")},{}],G9z0Bl:[function(e,t){function n(){if(!v++){var e=d.info=NREUM.info,t=f.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){u(p,function(t,n){e[t]||(e[t]=n)});var n="https"===s.split(":")[0]||e.sslForHttp;d.proto=n?"https://":"http://",a("mark",["onload",i()],null,"api");var r=f.createElement("script");r.src=d.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()],null,"api")}function i(){return(new Date).getTime()}var a=e("handle"),u=e(1),c=window,f=c.document;NREUM.o={ST:setTimeout,XHR:c.XMLHttpRequest,REQ:c.Request,EV:c.Event,PR:c.Promise,MO:c.MutationObserver},e(2);var s=(""+location).split("?")[0],p={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-885.min.js"},l=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),d=t.exports={offset:i(),origin:s,features:{},xhrWrappable:l};f.addEventListener?(f.addEventListener("DOMContentLoaded",o,!1),c.addEventListener("load",n,!1)):(f.attachEvent("onreadystatechange",r),c.attachEvent("onload",n)),a("mark",["firstbyte",i()],null,"api");var v=0},{1:12,2:3,handle:"D5DuLP"}],loader:[function(e,t){t.exports=e("G9z0Bl")},{}],12:[function(e,t){function n(e,t){var n=[],o="",i=0;for(o in e)r.call(e,o)&&(n[i]=t(o,e[o]),i+=1);return n}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],13:[function(e,t){function n(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=n},{}]},{},["G9z0Bl"]);</script>
  <title>Learn to build a Real-Time Slack clone with AngularFire - Thinkster</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/angularfire-slack-tutorial.html" rel="canonical">
  <meta name="description" content="Learn how to use AngularJS with Firebase to build a real-time Slack clone">
  <meta name="og:title" content="Learn to build a Real-Time Slack clone with AngularFire - Thinkster">
  <meta name="og:type" content="website">
  <meta name="og:url" content="https://thinkster.io/angularfire-slack-tutorial">
  <meta name="og:image" content="https://thinkster.io/assets/icon-79cdb85a926d14711db2851ada65b812b49ae8710025b2f6f9f080f8ffd85e24.png">
  <meta name="og:description" content="Learn how to use AngularJS with Firebase to build a real-time Slack clone">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://thinkster.io/assets/icon-79cdb85a926d14711db2851ada65b812b49ae8710025b2f6f9f080f8ffd85e24.png">
  <meta name="twitter:site" content="@GoThinkster">
  <meta name="twitter:title" content="Learn to build a Real-Time Slack clone with AngularFire - Thinkster">
  <meta name="twitter:description" content="Learn how to use AngularJS with Firebase to build a real-time Slack clone">
  <link rel="icon" type="image/png" href="https://thinkster.io/assets/favicon-8953b32c54d4ade02763c0a6f1c488017a989280f5ec1acb1ac2a8459aede831.png">
  <link rel="stylesheet" media="all" href="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/application-3cec613c27ef79407509505df2a7858d3cf07389cd3fa817.css" data-turbolinks-track="true">
  <script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/application-75397bf8049f102aad3bff0f0fe01dad9b58e2d43db8989d5.js" data-turbolinks-track="true"></script>
  <script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/headroom.js"></script>
  <link href="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/ionicons.css" rel="stylesheet" type="text/css">
  <link href="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/css.css" rel="stylesheet" type="text/css">


  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load('qHRg9TsCUu2kVgBDoycamjAYbe7fkprw');
  }}();window.stripePubKey='pk_live_2vJQ3CFTUejIVZsmF5G2JkAt';/**/
  (function(j,a,k,e){j._pa=j._pa||{};var pa=a.createElement(k);pa.type='text/java'+k;pa.async=true;pa.src=e;var s=a.getElementsByTagName(k)[0];s.parentNode.insertBefore(pa,s);})(window,document,'script','https://tag.perfectaudience.com/serve/546e6b25c2b687f594000007.js');/**/
  </script>
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K73H5Q" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-K73H5Q');</script>
<script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/tagjs.js" async="" type="text/javascript"></script><img src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/a_002.gif" height="1" border="0" width="1"><img src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/a.gif" height="1" border="0" width="1"><img class="bbqfmtcnhfspldddiukj" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/seg.html" height="1" border="0" width="1"><script data-cfasync="false" defer="defer" async="" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/application2.js"></script><style type="text/css">.olark-key,#hbl_code,#olark-data{display: none !important;}</style><link href="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/3f8420f61199875716260002f9987866.css" rel="stylesheet" type="text/css" id="habla_style_div"><style type="text/css">#olk-b-6646 .cancel-button-olk-316,#olk-b-6646 .referral-button-olk-316{font-family:"Helvetica Neue",HelveticaNeue,Helvetica,Arial,sans-serif !important;font-size:14px !important;font-weight:bold !important;border-radius:3px !important;border:1px solid #d65129;-webkit-font-smoothing:antialiased;width:80% !important;padding:10px 15px !important;margin-bottom:10px !important;transition:.03s;}#olk-b-6646 .cancel-button-olk-316:hover,#olk-b-6646 .referral-button-olk-316:hover{border:1px solid #c14925}#olk-b-6646 .cancel-button-olk-316:focus,#olk-b-6646 .referral-button-olk-316:focus{outline:0}#olk-b-6646{width:100% !important;display:inline-block !important}#olk-b-6646 .wrapper-olk-316{background:#fff;border-left:1px solid #ededed;border-right:1px solid #ededed;text-align:center;width:100%;position:absolute;top:34px;right:0;bottom:0;left:0;padding:10px;box-sizing:border-box;overflow-y:auto}#olk-b-6646 .description-olk-316{font-size:14px;font-family:"Helvetica Neue",HelveticaNeue,Helvetica,Arial,sans-serif;line-height:1.4em;margin:0 0 15px}#olk-b-6646 .cancel-button-olk-316{background:#d65129;color:#fff;}#olk-b-6646 .cancel-button-olk-316:hover{background:#c14925}#olk-b-6646 .referral-button-olk-316{background:#fff;color:#d65129;}#olk-b-6646 .referral-button-olk-316:hover{color:#c14925}#olk-b-6646 .brand-olk-316{color:#a6aeb0 !important;font-family:"Helvetica Neue",HelveticaNeue,Helvetica,Arial,sans-serif !important;padding:0 !important;font-size:11px !important;margin:0 0 5px 10px !important;display:inline-block !important;transition:.03s;}#olk-b-6646 .brand-olk-316:hover{color:#d65129 !important}</style><style type="text/css">@media print {#habla_beta_container_do_not_rely_on_div_classes_or_names {display: none !important}}</style></head>
<body class="headroom headroom--top"><div id="olark" style="display: none;"><olark><iframe id="olark-loader" frameborder="0"></iframe></olark></div>
<script type="text/javascript">
  analytics.page({path:'/angularfire-slack-tutorial'});
</script>

<div class="app-header">
  <div class="container">
    <div class="item">
      <a href="https://thinkster.io/" class="branding">
        <img style="border:0;" class="icon" alt="Thinkster" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/icon-79cdb85a926d14711db2851ada65b812b49ae8710025b2f6f9f080f.png"><img style="border:0;" class="logo" alt="Thinkster" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/logo-59638bd36fde4e01c12dfaf74f72b869dc3d7828c1a3793e7f5daf3.png">
      </a>
    </div>

    <div data-react-class="Auth.Logout" data-react-props="{}"><div class="hold-right" data-reactid=".0"><div class="item pro-btn hide-on-mobile" data-reactid=".0.0"><a href="https://thinkster.io/pro" data-reactid=".0.0.0"><i class="ion-flash" data-reactid=".0.0.0.0"></i><span data-reactid=".0.0.0.1"> Go Pro!</span></a></div><div class="item" data-reactid=".0.1"><a href="https://thinkster.io/#start-learning" data-reactid=".0.1.0">Topics</a></div><div class="item hide-on-mobile" data-reactid=".0.2"><a href="https://thinkster.io/profile" data-reactid=".0.2.0">Settings</a></div><div class="item hide-on-mobile" data-reactid=".0.3"><a style="cursor:pointer;" data-reactid=".0.3.0">Logout</a></div></div></div>
    <div data-react-class="Auth.Login" data-react-props="{}"><noscript data-reactid=".1"></noscript></div>
  </div>
</div>

<div class="header-push"></div>

<div class="coursepage">
  <div class="splash">
    <div class="container">
      <h1>Learn to build a Real-Time Slack clone with AngularFire</h1>
    </div>
    <div class="preview" style="background-image: url('/assets/firebase-header-0edc9625a8549e473c79bfb77acb7880fe5a7eb6ed53afaab29f16731c466621.png')"></div>

    <div class="course-info">
      <div class="wrapper">


        <div style="display: none;" id="nl-subscribe-top" class="sect nl-subscribe">
          <p>Stay on the bleeding edge of your favorite technologies.</p>
          <div data-react-class="Course.EmailCapture" data-react-props="{}"><div data-reactid=".2"></div></div>
        </div>

        <div class="sect author">
            <a href="https://twitter.com/iamalbertpai" target="_blank">
              <img src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/profile_image.jpg">
              <span>Albert Pai</span>
            </a>
        </div>

        <div class="sect graph-tags">
          <img title="Knowledge Graph" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/network2-a733608a3e0755e6850479d9b801f500ce054f26d4618a69a37.png" alt="Network2 a733608a3e0755e6850479d9b801f500ce054f26d4618a69a37e4e5dffcfe78e" border="0">
          <a href="https://thinkster.io/topics/angular">AngularJS</a>
          <a href="https://thinkster.io/topics/firebase">Firebase</a>
        </div>

        <div data-react-class="Course.Download" data-react-props="{&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;}"><a class="sect download" data-reactid=".3"><i class="ion-code-download" data-reactid=".3.0"></i><span data-reactid=".3.1"> Download Completed Source Code</span></a></div>
      </div>
    </div>


  </div>

  <div class="chrome">
    <div class="toc">
      <div data-react-class="Course.Sidebar" data-react-props="{&quot;toc&quot;:[[{&quot;slug&quot;:&quot;introduction&quot;,&quot;title&quot;:&quot;Introduction&quot;},[{&quot;slug&quot;:&quot;prerequisites&quot;,&quot;title&quot;:&quot;Prerequisites&quot;},{&quot;slug&quot;:&quot;final-notes-about-the-tutorial&quot;,&quot;title&quot;:&quot;Final Notes About the Tutorial&quot;}]],[{&quot;slug&quot;:&quot;getting-started&quot;,&quot;title&quot;:&quot;Getting Started&quot;}],[{&quot;slug&quot;:&quot;authenticating-users-using-angularfire&quot;,&quot;title&quot;:&quot;Authenticating Users using angularFire&quot;},[{&quot;slug&quot;:&quot;creating-the-auth-service&quot;,&quot;title&quot;:&quot;Creating the Auth Service&quot;},{&quot;slug&quot;:&quot;creating-the-auth-controller&quot;,&quot;title&quot;:&quot;Creating the Auth Controller&quot;}]],[{&quot;slug&quot;:&quot;storing-user-profiles-in-firebase&quot;,&quot;title&quot;:&quot;Storing User Profiles in Firebase&quot;}],[{&quot;slug&quot;:&quot;creating-the-channels-sidebar&quot;,&quot;title&quot;:&quot;Creating the Channels Sidebar&quot;}],[{&quot;slug&quot;:&quot;adding-messaging-functionality&quot;,&quot;title&quot;:&quot;Adding Messaging Functionality&quot;}],[{&quot;slug&quot;:&quot;creating-direct-messages&quot;,&quot;title&quot;:&quot;Creating Direct Messages&quot;}],[{&quot;slug&quot;:&quot;adding-presence-to-users&quot;,&quot;title&quot;:&quot;Adding Presence to Users&quot;}],[{&quot;slug&quot;:&quot;securing-your-data-with-security-rules&quot;,&quot;title&quot;:&quot;Securing Your Data with Security Rules&quot;}],[{&quot;slug&quot;:&quot;deploying-to-firebase&quot;,&quot;title&quot;:&quot;Deploying to Firebase&quot;}]],&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;}"><div id="SidebarWidget" class="SidebarWidget " data-reactid=".4"><iframe src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/follow_button_002.html" scrolling="no" allowtransparency="true" class="FollowButton sidebar-follow" data-reactid=".4.0" frameborder="0" height="30" width="190"></iframe><ul class="top" data-reactid=".4.1"><li class="" data-reactid=".4.1.$introduction"><a href="#introduction" data-reactid=".4.1.$introduction.0">Introduction</a><ul class="sub" data-reactid=".4.1.$introduction.1"><li data-reactid=".4.1.$introduction.1.$prerequisites"><a href="#prerequisites" data-reactid=".4.1.$introduction.1.$prerequisites.0">Prerequisites</a></li><li data-reactid=".4.1.$introduction.1.$final-notes-about-the-tutorial"><a href="#final-notes-about-the-tutorial" data-reactid=".4.1.$introduction.1.$final-notes-about-the-tutorial.0">Final Notes About the Tutorial</a></li></ul></li><li class="" data-reactid=".4.1.$getting-started"><a href="#getting-started" data-reactid=".4.1.$getting-started.0">Getting Started</a></li><li class="" data-reactid=".4.1.$authenticating-users-using-angularfire"><a href="#authenticating-users-using-angularfire" data-reactid=".4.1.$authenticating-users-using-angularfire.0">Authenticating Users using angularFire</a><ul class="sub" data-reactid=".4.1.$authenticating-users-using-angularfire.1"><li data-reactid=".4.1.$authenticating-users-using-angularfire.1.$creating-the-auth-service"><a href="#creating-the-auth-service" data-reactid=".4.1.$authenticating-users-using-angularfire.1.$creating-the-auth-service.0">Creating the Auth Service</a></li><li data-reactid=".4.1.$authenticating-users-using-angularfire.1.$creating-the-auth-controller"><a href="#creating-the-auth-controller" data-reactid=".4.1.$authenticating-users-using-angularfire.1.$creating-the-auth-controller.0">Creating the Auth Controller</a></li></ul></li><li class="" data-reactid=".4.1.$storing-user-profiles-in-firebase"><a href="#storing-user-profiles-in-firebase" data-reactid=".4.1.$storing-user-profiles-in-firebase.0">Storing User Profiles in Firebase</a></li><li class="" data-reactid=".4.1.$creating-the-channels-sidebar"><a href="#creating-the-channels-sidebar" data-reactid=".4.1.$creating-the-channels-sidebar.0">Creating the Channels Sidebar</a></li><li class="" data-reactid=".4.1.$adding-messaging-functionality"><a href="#adding-messaging-functionality" data-reactid=".4.1.$adding-messaging-functionality.0">Adding Messaging Functionality</a></li><li class="" data-reactid=".4.1.$creating-direct-messages"><a href="#creating-direct-messages" data-reactid=".4.1.$creating-direct-messages.0">Creating Direct Messages</a></li><li class="" data-reactid=".4.1.$adding-presence-to-users"><a href="#adding-presence-to-users" data-reactid=".4.1.$adding-presence-to-users.0">Adding Presence to Users</a></li><li class="" data-reactid=".4.1.$securing-your-data-with-security-rules"><a href="#securing-your-data-with-security-rules" data-reactid=".4.1.$securing-your-data-with-security-rules.0">Securing Your Data with Security Rules</a></li><li class="" data-reactid=".4.1.$deploying-to-firebase"><a href="#deploying-to-firebase" data-reactid=".4.1.$deploying-to-firebase.0">Deploying to Firebase</a></li></ul></div></div>
    </div>
    <div class="content">
      <div class="wrap" id="course-wrapper">
        <div class="course-section" id="introduction"><h1>Introduction</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;angular-slack-intro&quot;,&quot;provider&quot;:&quot;youtube&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:null,&quot;video&quot;:{&quot;id&quot;:114,&quot;provider_name&quot;:&quot;youtube&quot;,&quot;provider_id&quot;:&quot;rpMlTvhQClQ&quot;,&quot;slug&quot;:&quot;angular-slack-intro&quot;,&quot;pro&quot;:false,&quot;course_id&quot;:65,&quot;created_at&quot;:&quot;2015-09-20T08:52:27.179Z&quot;,&quot;updated_at&quot;:&quot;2015-09-20T08:52:27.179Z&quot;,&quot;thumbnail_url&quot;:null}}"><iframe class="youtube-vid" src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/rpMlTvhQClQ.html" allowfullscreen="" data-reactid=".5" frameborder="0"></iframe></div><p>The goal of this tutorial is to guide you through the creation of a
<a href="https://slack.com/" target="_blank">Slack</a> clone called fireSlack. Upon completion, you will
learn how to build a real time collaborative chat application using <a href="https://www.firebase.com/docs/web/libraries/angular/index.html" target="_blank">angularFire</a>
to integrate <a href="https://firebase.com/" target="_blank">Firebase</a> with <a href="https://angularjs.org/" target="_blank">AngularJS</a>.
Your application will be able to provide the following features:</p>
<ul>
<li>Sign up for an account</li>
<li>Join/create channels to chat in</li>
<li>Have a user profile</li>
<li>Direct message other users</li>
<li>See who's online</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>
<p>This course assumes knowledge of programming and at least basic knowledge of
JavaScript and AngularJS. We recommend going through <a href="https://thinkster.io/a-better-way-to-learn-angularjs/" target="_blank">A Better Way to Learn AngularJS</a>
if you're not familiar with AngularJS. We've created a <a href="https://github.com/apai4/fireslack-seed" target="_blank">seed repo</a>
based off of the <a href="https://github.com/yeoman/generator-angular" target="_blank">Yeoman AngularJS Generator</a>
to help you get started faster. Before you begin, you will need to have <a href="https://nodejs.org/" target="_blank">Node.js</a>,
<a href="https://www.npmjs.org/" target="_blank">npm</a>, and <a href="https://git-scm.com/" target="_blank">Git</a> installed. We'll
need Node.js and npm in order to install <a href="http://gruntjs.com/" target="_blank">Grunt</a> and <a href="http://bower.io/" target="_blank">Bower</a>
for managing dependencies. Follow <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager" target="_blank">these instructions</a>
for installing Node.js and npm, and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank">these instructions</a>
for installing Git. Additionally, you'll need to have a <a href="https://www.firebase.com/signup/?utm_medium=tutorial&amp;utm_source=thinkster&amp;campaign=angular_article" target="_blank">free Firebase account</a>
and create a Firebase for this tutorial.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;install node&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Install Node.js&quot;,&quot;isFirst&quot;:true}"><div class="Checkbox marked" data-reactid=".6"><div class="checkbox-holder" data-reactid=".6.0"><div class="chkbox checked" style="display: block;" data-reactid=".6.0.0"><i class="icon-ok" data-reactid=".6.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".6.0.1"><i class="icon-ok" data-reactid=".6.0.1.0"></i></div><div class="tooltip" style="display: none;" data-reactid=".6.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".6.1">Install Node.js</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;install git&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Install Git&quot;}"><div class="Checkbox marked" data-reactid=".7"><div class="checkbox-holder" data-reactid=".7.0"><div class="chkbox checked" style="display: block;" data-reactid=".7.0.0"><i class="icon-ok" data-reactid=".7.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".7.0.1"><i class="icon-ok" data-reactid=".7.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".7.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".7.1">Install Git</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;clone seed repo&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Clone the \u003ca href=\&quot;https://github.com/apai4/fireslack-seed\&quot; target=\&quot;_blank\&quot;\u003eseed repo\u003c/a\u003e&quot;}"><div class="Checkbox marked" data-reactid=".8"><div class="checkbox-holder" data-reactid=".8.0"><div class="chkbox checked" style="display: block;" data-reactid=".8.0.0"><i class="icon-ok" data-reactid=".8.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".8.0.1"><i class="icon-ok" data-reactid=".8.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".8.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".8.1">Clone the <a href="https://github.com/apai4/fireslack-seed" target="_blank">seed repo</a></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create firebase&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new Firebase from the Firebase Dashboard&quot;}"><div class="Checkbox marked" data-reactid=".9"><div class="checkbox-holder" data-reactid=".9.0"><div class="chkbox checked" style="display: block;" data-reactid=".9.0.0"><i class="icon-ok" data-reactid=".9.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".9.0.1"><i class="icon-ok" data-reactid=".9.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".9.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".9.1">Create a new Firebase from the Firebase Dashboard</div></div></div>
<h2 id="final-notes-about-the-tutorial">Final Notes About the Tutorial</h2>
<p>You should <em>never</em> copy and paste code from this text unless we tell you to, as
we've found that the skills being taught will stick better if you write out all
of the code yourself. If you need more clarification on a certain part of the
tutorial, we recommend that viewing the supplementary screencast series as we go
into far more detail in each of the videos. It's also significantly easier to
learn from the screencast series than the text, as you can actually see how a
skilled developer manipulates the concepts in AngularJS to build a working
application.</p></div><div class="course-section" id="getting-started"><h1>Getting Started</h1><p>Once the initial codebase is cloned locally, we'll need to run a few commands
to install dependencies and get our application up and running. Within our
codebase, run the following commands:</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;run npm install&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003enpm install\u003c/code\u003e to install our node dependencies&quot;}"><div class="Checkbox marked" data-reactid=".a"><div class="checkbox-holder" data-reactid=".a.0"><div class="chkbox checked" style="display: block;" data-reactid=".a.0.0"><i class="icon-ok" data-reactid=".a.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".a.0.1"><i class="icon-ok" data-reactid=".a.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".a.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".a.1">Run <code>npm install</code> to install our node dependencies</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;install bower grunt&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003enpm install -g bower grunt-cli\u003c/code\u003e to install Bower and Grunt.&quot;}"><div class="Checkbox marked" data-reactid=".b"><div class="checkbox-holder" data-reactid=".b.0"><div class="chkbox checked" style="display: block;" data-reactid=".b.0.0"><i class="icon-ok" data-reactid=".b.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".b.0.1"><i class="icon-ok" data-reactid=".b.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".b.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".b.1">Run <code>npm install -g bower grunt-cli</code> to install Bower and Grunt.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;run bower install&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003ebower install\u003c/code\u003e to install our bower dependencies&quot;}"><div class="Checkbox marked" data-reactid=".c"><div class="checkbox-holder" data-reactid=".c.0"><div class="chkbox checked" style="display: block;" data-reactid=".c.0.0"><i class="icon-ok" data-reactid=".c.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".c.0.1"><i class="icon-ok" data-reactid=".c.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".c.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".c.1">Run <code>bower install</code> to install our bower dependencies</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;run grunt serve&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003egrunt serve\u003c/code\u003e to start our application.&quot;}"><div class="Checkbox marked" data-reactid=".d"><div class="checkbox-holder" data-reactid=".d.0"><div class="chkbox checked" style="display: block;" data-reactid=".d.0.0"><i class="icon-ok" data-reactid=".d.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".d.0.1"><i class="icon-ok" data-reactid=".d.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".d.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".d.1">Run <code>grunt serve</code> to start our application.</div></div></div><p>After running <code>grunt serve</code>, open up <code>http://localhost:4000</code> and you should see
a splash page for our application, with a non-functional login and register
page ready for us to build off of. In this tutorial, our directory structure
will be grouped by feature (see #1 in <a href="https://www.airpair.com/angularjs/posts/top-10-mistakes-angularjs-developers-make" target="_blank">this list</a>)
and we will be using <a href="https://github.com/angular-ui/ui-router" target="_blank">ui-router</a> as
our router. We'll also be using the "controller as" syntax for referencing our
controllers.</p></div><div class="course-section" id="authenticating-users-using-angularfire"><h1>Authenticating Users using angularFire</h1><p>Creating a registration and login system for your app can be tedious, but is
often one of the most important and required features, and usually requires
you to create your own backend. Thankfully, Firebase makes this really easy
for us by providing us with a hosted solution.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;enable auth auth&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In the Login \u0026amp; Auth section of your Firebase, check the Enable Email \u0026amp; Password Authentication box.&quot;}"><div class="Checkbox marked" data-reactid=".e"><div class="checkbox-holder" data-reactid=".e.0"><div class="chkbox checked" style="display: block;" data-reactid=".e.0.0"><i class="icon-ok" data-reactid=".e.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".e.0.1"><i class="icon-ok" data-reactid=".e.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".e.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".e.1">In the Login &amp; Auth section of your Firebase, check the Enable Email &amp; Password Authentication box.</div></div></div><p>While you have your Firebase pulled up, keep your Firebase URL handy. It should
look something like: <code>https://firebase-name-here.firebaseio.com/</code></p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set firebaseurl&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;At the bottom of \u003ccode\u003eapp/app.js\u003c/code\u003e, set the \u003ccode\u003eFirebaseUrl\u003c/code\u003e constant to your Firebase Url.&quot;}"><div class="Checkbox marked" data-reactid=".f"><div class="checkbox-holder" data-reactid=".f.0"><div class="chkbox checked" style="display: block;" data-reactid=".f.0.0"><i class="icon-ok" data-reactid=".f.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".f.0.1"><i class="icon-ok" data-reactid=".f.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".f.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".f.1">At the bottom of <code>app/app.js</code>, set the <code>FirebaseUrl</code> constant to your Firebase Url.</div></div></div><div class="highlight"><pre>  <span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">'FirebaseUrl'</span><span class="p">,</span> <span class="s1">'https://firebase-name-here.firebaseio.com/'</span><span class="p">);</span>
</pre></div>
<h2 id="creating-the-auth-service">Creating the Auth Service</h2>
<div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;authservice&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/bcde2f5c4a479543e69565263068b76fa31d4b29.jpg&quot;}"><div class="Video" data-reactid=".g"><div class="holder" data-reactid=".g.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/bcde2f5c4a479543e69565263068b76fa31d4b29.jpg?image_crop_resized=640x400');" data-reactid=".g.0.0"><div class="fake-play-button" data-reactid=".g.0.0.0"></div></div></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create new auth service&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Let\u0026#39;s create a new factory called \u003ccode\u003eAuth\u003c/code\u003e in \u003ccode\u003eapp/auth/auth.service.js\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".h"><div class="checkbox-holder" data-reactid=".h.0"><div class="chkbox checked" style="display:none;" data-reactid=".h.0.0"><i class="icon-ok" data-reactid=".h.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".h.0.1"><i class="icon-ok" data-reactid=".h.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".h.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".h.1">Let's create a new factory called <code>Auth</code> in <code>app/auth/auth.service.js</code></div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Auth'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

  <span class="p">});</span>
</pre></div><p>Here we'll inject <code>$firebaseAuth</code>, which is a service that AngularFire provides
us with, along with our constant, <code>FirebaseUrl</code>. Then we'll be able to create a
reference to Firebase using the <code>Firebase</code> constructor and our <code>FirebaseUrl</code>,
which we'll be passing to the <code>$firebaseAuth</code> service. See the
<a href="https://www.firebase.com/docs/web/libraries/angular/api.html#angularfire-users-and-authentication" target="_blank">angularFire API docs</a>
for a list of available methods <code>$firebaseAuth</code> provides. Our factory will
return the <code>$firebaseAuth</code> service associated with our Firebase.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;inject auth dependencies&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Inject \u003ccode\u003e$firebaseAuth\u003c/code\u003e and \u003ccode\u003eFirebaseUrl\u003c/code\u003e into our \u003ccode\u003eAuth\u003c/code\u003e factory.&quot;}"><div class="Checkbox marked" data-reactid=".i"><div class="checkbox-holder" data-reactid=".i.0"><div class="chkbox checked" style="display: block;" data-reactid=".i.0.0"><i class="icon-ok" data-reactid=".i.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".i.0.1"><i class="icon-ok" data-reactid=".i.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".i.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".i.1">Inject <code>$firebaseAuth</code> and <code>FirebaseUrl</code> into our <code>Auth</code> factory.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create firebase reference&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a Firebase reference to our Firebase with \u003ccode\u003evar ref = new Firebase(FirebaseUrl);\u003c/code\u003e&quot;}"><div class="Checkbox marked" data-reactid=".j"><div class="checkbox-holder" data-reactid=".j.0"><div class="chkbox checked" style="display: block;" data-reactid=".j.0.0"><i class="icon-ok" data-reactid=".j.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".j.0.1"><i class="icon-ok" data-reactid=".j.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".j.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".j.1">Create a Firebase reference to our Firebase with <code>var ref = new Firebase(FirebaseUrl);</code></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create firebase auth&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Pass the Firebase reference to the \u003ccode\u003e$firebaseAuth\u003c/code\u003e service, and have your factory return it.&quot;}"><div class="Checkbox marked" data-reactid=".k"><div class="checkbox-holder" data-reactid=".k.0"><div class="chkbox checked" style="display: block;" data-reactid=".k.0.0"><i class="icon-ok" data-reactid=".k.0.0.0"></i></div><div class="chkbox unchecked" style="display: none;" data-reactid=".k.0.1"><i class="icon-ok" data-reactid=".k.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".k.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".k.1">Pass the Firebase reference to the <code>$firebaseAuth</code> service, and have your factory return it.</div></div></div><p>The resulting factory should look like this:</p><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Auth'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseAuth</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">ref</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">auth</span> <span class="o">=</span> <span class="nx">$firebaseAuth</span><span class="p">(</span><span class="nx">ref</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">auth</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>Now that we have an <code>Auth</code> service ready for our application to use, let's
create a controller to use with our login and registration forms.</p>
<h2 id="creating-the-auth-controller">Creating the Auth Controller</h2>
<div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;authcontroller&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/3c0028cf88e8589105b51e5e40b350a082526cb1.jpg&quot;}"><div class="Video" data-reactid=".l"><div class="holder" data-reactid=".l.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/3c0028cf88e8589105b51e5e40b350a082526cb1.jpg?image_crop_resized=640x400');" data-reactid=".l.0.0"><div class="fake-play-button" data-reactid=".l.0.0.0"></div></div></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create authctrl&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a controller named \u003ccode\u003eAuthCtrl\u003c/code\u003e and inject \u003ccode\u003eAuth\u003c/code\u003e and \u003ccode\u003e$state\u003c/code\u003e into it.&quot;}"><div class="Checkbox " data-reactid=".m"><div class="checkbox-holder" data-reactid=".m.0"><div class="chkbox checked" style="display:none;" data-reactid=".m.0.0"><i class="icon-ok" data-reactid=".m.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".m.0.1"><i class="icon-ok" data-reactid=".m.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".m.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".m.1">Create a controller named <code>AuthCtrl</code> and inject <code>Auth</code> and <code>$state</code> into it.</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'AuthCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Auth</span><span class="p">,</span> <span class="nx">$state</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">authCtrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="p">});</span>
</pre></div><p>The <code>$state</code> service is provided by <code>ui-router</code> for us to control the state
of our application. We can use the <code>go()</code> function on <code>$state</code> to redirect
our application to a specific state. We also create a reference to the <code>this</code>
keyword within our controller because we're using the <code>controller as</code> syntax.
For more information about this syntax, see <a href="https://thinkster.io/a-better-way-to-learn-angularjs/controllers" target="_blank">this lesson</a>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;initialize user&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Next, create a user object on our controller with empty strings for email and password&quot;}"><div class="Checkbox " data-reactid=".n"><div class="checkbox-holder" data-reactid=".n.0"><div class="chkbox checked" style="display:none;" data-reactid=".n.0.0"><i class="icon-ok" data-reactid=".n.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".n.0.1"><i class="icon-ok" data-reactid=".n.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".n.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".n.1">Next, create a user object on our controller with empty strings for email and password</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'AuthCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Auth</span><span class="p">,</span> <span class="nx">$state</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">authCtrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">authCtrl</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">email</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
      <span class="nx">password</span><span class="o">:</span> <span class="s1">''</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div><p>This user object will be used with the <code>ng-model</code> directive in our form. Next,
we'll need two functions on our controller, one for registering users and one
for logging in users. <code>$firebaseAuth</code> provides us with two functions:
<code>$authWithPassword</code> for logging in users and <code>$createUser</code> for registering
users. Both of these functions take a user object like the one we initialized
on our controller, and return a promise. If you're not familiar with how
promises work, read <a href="https://thinkster.io/a-better-way-to-learn-angularjs/promises" target="_blank">this</a>
to learn more about promises.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create authctrl login&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the following \u003ccode\u003elogin\u003c/code\u003e function in \u003ccode\u003eAuthCtrl\u003c/code\u003e:&quot;}"><div class="Checkbox " data-reactid=".o"><div class="checkbox-holder" data-reactid=".o.0"><div class="chkbox checked" style="display:none;" data-reactid=".o.0.0"><i class="icon-ok" data-reactid=".o.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".o.0.1"><i class="icon-ok" data-reactid=".o.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".o.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".o.1">Create the following <code>login</code> function in <code>AuthCtrl</code>:</div></div></div><div class="highlight"><pre><span class="nx">authCtrl</span><span class="p">.</span><span class="nx">login</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span>
  <span class="nx">Auth</span><span class="p">.</span><span class="nx">$authWithPassword</span><span class="p">(</span><span class="nx">authCtrl</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
    <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">authCtrl</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div><p>When authentication is successful, we want to send the user to the home state.
When it fails, we want to set the error on our controller so we can display the
error message to our user.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create authctrl register&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the following \u003ccode\u003eregister\u003c/code\u003e function in \u003ccode\u003eAuthCtrl\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".p"><div class="checkbox-holder" data-reactid=".p.0"><div class="chkbox checked" style="display:none;" data-reactid=".p.0.0"><i class="icon-ok" data-reactid=".p.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".p.0.1"><i class="icon-ok" data-reactid=".p.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".p.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".p.1">Create the following <code>register</code> function in <code>AuthCtrl</code></div></div></div><div class="highlight"><pre><span class="nx">authCtrl</span><span class="p">.</span><span class="nx">register</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span>
  <span class="nx">Auth</span><span class="p">.</span><span class="nx">$createUser</span><span class="p">(</span><span class="nx">authCtrl</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">){</span>
    <span class="nx">authCtrl</span><span class="p">.</span><span class="nx">login</span><span class="p">();</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">authCtrl</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div><p>Our <code>register</code> function works very similarly to our <code>login</code> function. We want
to set <code>error</code> on the controller if <code>$createUser</code> fails, however, when
<code>$createUser</code> succeeds, it doesn't automatically log in the user that was just
created so we'll need to call the <code>login</code> function we just created to log the
user in. Now that we have our authentication service and controller created,
let's update our templates and put them to use.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;include auth service controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/index.html\u003c/code\u003e, include the auth service and controller after where \u003ccode\u003eapp.js\u003c/code\u003e is included.&quot;}"><div class="Checkbox " data-reactid=".q"><div class="checkbox-holder" data-reactid=".q.0"><div class="chkbox checked" style="display:none;" data-reactid=".q.0.0"><i class="icon-ok" data-reactid=".q.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".q.0.1"><i class="icon-ok" data-reactid=".q.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".q.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".q.1">In <code>app/index.html</code>, include the auth service and controller after where <code>app.js</code> is included.</div></div></div><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"auth/auth.controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"auth/auth.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;specify login register controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/app.js\u003c/code\u003e, specify \u003ccode\u003eAuthCtrl\u003c/code\u003e as our controller for both the \u003ccode\u003elogin\u003c/code\u003e and \u003ccode\u003eregister\u003c/code\u003e states.&quot;}"><div class="Checkbox " data-reactid=".r"><div class="checkbox-holder" data-reactid=".r.0"><div class="chkbox checked" style="display:none;" data-reactid=".r.0.0"><i class="icon-ok" data-reactid=".r.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".r.0.1"><i class="icon-ok" data-reactid=".r.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".r.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".r.1">In <code>app/app.js</code>, specify <code>AuthCtrl</code> as our controller for both the <code>login</code> and <code>register</code> states.</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'login'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/login'</span><span class="p">,</span>
  <span class="nx">controller</span><span class="o">:</span> <span class="s1">'AuthCtrl as authCtrl'</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'auth/login.html'</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'register'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/register'</span><span class="p">,</span>
  <span class="nx">controller</span><span class="o">:</span> <span class="s1">'AuthCtrl as authCtrl'</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'auth/register.html'</span>
<span class="p">})</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;register ngsubmit&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/auth/register.html\u003c/code\u003e, add \u003ccode\u003eng-submit\u003c/code\u003e to the form and specify \u003ccode\u003eauthCtrl.register()\u003c/code\u003e as the submit function.&quot;}"><div class="Checkbox " data-reactid=".s"><div class="checkbox-holder" data-reactid=".s.0"><div class="chkbox checked" style="display:none;" data-reactid=".s.0.0"><i class="icon-ok" data-reactid=".s.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".s.0.1"><i class="icon-ok" data-reactid=".s.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".s.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".s.1">In <code>app/auth/register.html</code>, add <code>ng-submit</code> to the form and specify <code>authCtrl.register()</code> as the submit function.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;register ngmodel email&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add \u003ccode\u003eng-model=\u0026quot;authCtrl.user.email\u0026quot;\u003c/code\u003e to the email input.&quot;}"><div class="Checkbox " data-reactid=".t"><div class="checkbox-holder" data-reactid=".t.0"><div class="chkbox checked" style="display:none;" data-reactid=".t.0.0"><i class="icon-ok" data-reactid=".t.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".t.0.1"><i class="icon-ok" data-reactid=".t.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".t.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".t.1">Add <code>ng-model="authCtrl.user.email"</code> to the email input.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;register ngmodel password&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add \u003ccode\u003eng-model=\u0026quot;authCtrl.user.password\u0026quot;\u003c/code\u003e to the password input.&quot;}"><div class="Checkbox " data-reactid=".u"><div class="checkbox-holder" data-reactid=".u.0"><div class="chkbox checked" style="display:none;" data-reactid=".u.0.0"><i class="icon-ok" data-reactid=".u.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".u.0.1"><i class="icon-ok" data-reactid=".u.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".u.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".u.1">Add <code>ng-model="authCtrl.user.password"</code> to the password input.</div></div></div><p>The resulting form should look like this:</p><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">"authCtrl.register()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Email"</span> <span class="na">ng-model=</span><span class="s">"authCtrl.user.email"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Password"</span> <span class="na">ng-model=</span><span class="s">"authCtrl.user.password"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">value=</span><span class="s">"Register"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;register error div&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Finally, add the following \u003ccode\u003ediv\u003c/code\u003e just above the form:&quot;}"><div class="Checkbox " data-reactid=".v"><div class="checkbox-holder" data-reactid=".v.0"><div class="chkbox checked" style="display:none;" data-reactid=".v.0.0"><i class="icon-ok" data-reactid=".v.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".v.0.1"><i class="icon-ok" data-reactid=".v.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".v.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".v.1">Finally, add the following <code>div</code> just above the form:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"authCtrl.error"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>{{ authCtrl.error.message }}<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>This div will remain hidden until our authentication controller reaches an
error, in which case the error message it will get displayed to our user. Next,
let's update our login template in a similar fashion.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;login ngsubmit&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/auth/login.html\u003c/code\u003e, add \u003ccode\u003eng-submit=\u0026quot;authCtrl.login()\u0026quot;\u003c/code\u003e to the form.&quot;}"><div class="Checkbox " data-reactid=".w"><div class="checkbox-holder" data-reactid=".w.0"><div class="chkbox checked" style="display:none;" data-reactid=".w.0.0"><i class="icon-ok" data-reactid=".w.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".w.0.1"><i class="icon-ok" data-reactid=".w.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".w.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".w.1">In <code>app/auth/login.html</code>, add <code>ng-submit="authCtrl.login()"</code> to the form.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;login ngmodel email&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add \u003ccode\u003eng-model=\u0026quot;authCtrl.user.email\u0026quot;\u003c/code\u003e to the email input.&quot;}"><div class="Checkbox " data-reactid=".x"><div class="checkbox-holder" data-reactid=".x.0"><div class="chkbox checked" style="display:none;" data-reactid=".x.0.0"><i class="icon-ok" data-reactid=".x.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".x.0.1"><i class="icon-ok" data-reactid=".x.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".x.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".x.1">Add <code>ng-model="authCtrl.user.email"</code> to the email input.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;login ngmodel password&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add \u003ccode\u003eng-model=\u0026quot;authCtrl.user.password\u0026quot;\u003c/code\u003e to the password input.&quot;}"><div class="Checkbox " data-reactid=".y"><div class="checkbox-holder" data-reactid=".y.0"><div class="chkbox checked" style="display:none;" data-reactid=".y.0.0"><i class="icon-ok" data-reactid=".y.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".y.0.1"><i class="icon-ok" data-reactid=".y.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".y.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".y.1">Add <code>ng-model="authCtrl.user.password"</code> to the password input.</div></div></div><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">"authCtrl.login()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Email"</span> <span class="na">ng-model=</span><span class="s">"authCtrl.user.email"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Password"</span> <span class="na">ng-model=</span><span class="s">"authCtrl.user.password"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">value=</span><span class="s">"Log In"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;login error div&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Finally, add the same \u003ccode\u003ediv\u003c/code\u003e that we did for the register view just above the form for error handling:&quot;}"><div class="Checkbox " data-reactid=".z"><div class="checkbox-holder" data-reactid=".z.0"><div class="chkbox checked" style="display:none;" data-reactid=".z.0.0"><i class="icon-ok" data-reactid=".z.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".z.0.1"><i class="icon-ok" data-reactid=".z.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".z.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".z.1">Finally, add the same <code>div</code> that we did for the register view just above the form for error handling:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"authCtrl.error"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>{{ authCtrl.error.message }}<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>Now we should have a working register and login system, but we have no way of
telling if the user is logged in or not. The login and registration pages are
still accessible if we are authenticated. We can resolve this by using the
<code>resolve</code> property on our states. <code>resolve</code> allows us to create dependencies
that can be injected into controllers or child states. These dependencies can
depend on services in our app that return promises, and the promises will get
resolved before our controller gets instantiated.  Read the <a href="https://github.com/angular-ui/ui-router/wiki#resolve" target="_blank">ui-router Github Wiki</a>
if you're not familiar with how <code>resolve</code> works with <code>ui-router</code>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;login register resolve&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add the following resolve property to both the \u003ccode\u003elogin\u003c/code\u003e and \u003ccode\u003eregister\u003c/code\u003e state:&quot;}"><div class="Checkbox " data-reactid=".10"><div class="checkbox-holder" data-reactid=".10.0"><div class="chkbox checked" style="display:none;" data-reactid=".10.0.0"><i class="icon-ok" data-reactid=".10.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".10.0.1"><i class="icon-ok" data-reactid=".10.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".10.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".10.1">Add the following resolve property to both the <code>login</code> and <code>register</code> state:</div></div></div><div class="highlight"><pre><span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">requireNoAuth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">$requireAuth</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
      <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div><p>The <code>$firebaseAuth</code> service provides us with a <code>$requireAuth</code> function which
returns a promise. This promise will get resolved with an <code>auth</code> object if the
user is logged in. The <a href="https://www.firebase.com/docs/web/guide/login/password.html#section-logging-in" target="_blank">Firebase Documentation</a>
provides a table of what information is available to us within <code>auth</code>. If the
user is not authenticated, the promise gets rejected. In our <code>requireNoAuth</code>
dependency, if the User is logged in we want to send them back to the <code>home</code>
state, otherwise, we need to catch the error that gets thrown and handle it
gracefully by returning nothing, allowing the promise to be resolved instead
of rejected. Now, we should no longer be able to access the login or register
states if we're authenticated.</p></div><div class="course-section" id="storing-user-profiles-in-firebase"><h1>Storing User Profiles in Firebase</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;profileservice&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/a623822b86dc4db6e43ad3f48e3ec82076863d07.jpg&quot;}"><div class="Video" data-reactid=".11"><div class="holder" data-reactid=".11.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/a623822b86dc4db6e43ad3f48e3ec82076863d07.jpg?image_crop_resized=640x400');" data-reactid=".11.0.0"><div class="fake-play-button" data-reactid=".11.0.0.0"></div></div></div></div></div><p>Now that we're able to authenticate users, let's create the ability for users
to have custom display names to use in our app (rather than showing the user's
email or uid)</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;Create users service&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a factory \u003ccode\u003eUsers\u003c/code\u003e in \u003ccode\u003eapp/users/users.service.js\u003c/code\u003e. This factory will depend on \u003ccode\u003e$firebaseArray\u003c/code\u003e, \u003ccode\u003e$firebaseObject\u003c/code\u003e, and `FirebaseUrl;&quot;}"><div class="Checkbox " data-reactid=".12"><div class="checkbox-holder" data-reactid=".12.0"><div class="chkbox checked" style="display:none;" data-reactid=".12.0.0"><i class="icon-ok" data-reactid=".12.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".12.0.1"><i class="icon-ok" data-reactid=".12.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".12.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".12.1">Create a factory <code>Users</code> in <code>app/users/users.service.js</code>. This factory will depend on <code>$firebaseArray</code>, <code>$firebaseObject</code>, and `FirebaseUrl;</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseArray</span><span class="p">,</span> <span class="nx">$firebaseObject</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">return</span> <span class="nx">Users</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>The purpose of this factory is to provide us with the ability to get either
a specific user's data, or to get a list of all of our users. Note that while
Firebase provides us with a means of authentication, all of the authentication
data is separate from our Firebase data and can't be queried. It is up to us to
store any custom user data within Firebase manually.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create users ref&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a reference to the \u003ccode\u003eusers\u003c/code\u003e node&quot;}"><div class="Checkbox " data-reactid=".13"><div class="checkbox-holder" data-reactid=".13.0"><div class="chkbox checked" style="display:none;" data-reactid=".13.0.0"><i class="icon-ok" data-reactid=".13.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".13.0.1"><i class="icon-ok" data-reactid=".13.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".13.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".13.1">Create a reference to the <code>users</code> node</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseArray</span><span class="p">,</span> <span class="nx">$firebaseObject</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">usersRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'users'</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">return</span> <span class="nx">Users</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>Data in Firebase is stored in a <a href="https://en.wikipedia.org/wiki/Tree_%28data_structure%29" target="_blank">tree structure</a>
and child nodes can be referenced by adding a path to our <code>FirebaseUrl</code>,
so <code>https://firebase-name-here.firebase.io.com/users</code> refers to the <code>users</code>
node.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;read firebase data&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Read the Firebase documentation on \u003ca href=\&quot;https://www.firebase.com/docs/web/guide/understanding-data.html\&quot; target=\&quot;_blank\&quot;\u003eunderstanding data\u003c/a\u003e to learn about how data is stored in Firebase, along with the limitations and restrictions.&quot;}"><div class="Checkbox " data-reactid=".14"><div class="checkbox-holder" data-reactid=".14.0"><div class="chkbox checked" style="display:none;" data-reactid=".14.0.0"><i class="icon-ok" data-reactid=".14.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".14.0.1"><i class="icon-ok" data-reactid=".14.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".14.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".14.1">Read the Firebase documentation on <a href="https://www.firebase.com/docs/web/guide/understanding-data.html" target="_blank">understanding data</a> to learn about how data is stored in Firebase, along with the limitations and restrictions.</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create users array&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003e$firebaseArray\u003c/code\u003e using the reference we just created.&quot;}"><div class="Checkbox " data-reactid=".15"><div class="checkbox-holder" data-reactid=".15.0"><div class="chkbox checked" style="display:none;" data-reactid=".15.0.0"><i class="icon-ok" data-reactid=".15.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".15.0.1"><i class="icon-ok" data-reactid=".15.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".15.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".15.1">Create a <code>$firebaseArray</code> using the reference we just created.</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseArray</span><span class="p">,</span> <span class="nx">$firebaseObject</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">usersRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'users'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">usersRef</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">return</span> <span class="nx">Users</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>It's also good to know that while <code>$firebaseArray</code> will return pseudo array,
meaning it will act a lot like an array in javascript, however, methods like
<code>splice()</code>, <code>push()</code>, <code>pop()</code> will only affect data locally and not on the
Firebase. Instead, <code>$firebaseArray</code> provides methods named <code>$add</code> and <code>$remove</code>
to provide similar functionality while keeping your data in sync. Read the
<a href="https://www.firebase.com/docs/web/libraries/angular/api.html#angularfire-firebasearray" target="_blank">$firebaseArray Documentation</a>
For a complete understanding of how <code>$firebaseArray</code> should be used.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create Users object&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003eUsers\u003c/code\u003e to the following object:&quot;}"><div class="Checkbox " data-reactid=".16"><div class="checkbox-holder" data-reactid=".16.0"><div class="chkbox checked" style="display:none;" data-reactid=".16.0.0"><i class="icon-ok" data-reactid=".16.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".16.0.1"><i class="icon-ok" data-reactid=".16.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".16.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".16.1">Set <code>Users</code> to the following object:</div></div></div><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">getProfile</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">$firebaseObject</span><span class="p">(</span><span class="nx">usersRef</span><span class="p">.</span><span class="nx">child</span><span class="p">(</span><span class="nx">uid</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">getDisplayName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">users</span><span class="p">.</span><span class="nx">$getRecord</span><span class="p">(</span><span class="nx">uid</span><span class="p">).</span><span class="nx">displayName</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">all</span><span class="o">:</span> <span class="nx">users</span>
<span class="p">};</span>
</pre></div><p><code>getProfile(uid)</code> allows us to get a <code>$firebaseObject</code> of a specific user's
profile, while <code>all</code> returns a <code>$firebaseArray</code> of all the users.
<code>getDisplayName(uid)</code> is a helper function that returns a user's <code>displayName</code>
when given a <code>uid</code>. We will be keying our data by the <code>uid</code> that comes back from our Firebase auth data, so data in our Firebase will look similar to:</p><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"users"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"simplelogin:1"</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">"displayName"</span><span class="o">:</span> <span class="s2">"Blake Jackson"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div><p>Now that our <code>Users</code> service is created, let's create a controller for updating
a user's profile. First we'll need to create a new state in <code>app/app.js</code> to
<code>resolve</code> a couple dependencies. We want to have the user's <code>auth</code> data
and their profile available to us before our controller is instantiated.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create profile state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new state for profile:&quot;}"><div class="Checkbox " data-reactid=".17"><div class="checkbox-holder" data-reactid=".17.0"><div class="chkbox checked" style="display:none;" data-reactid=".17.0.0"><i class="icon-ok" data-reactid=".17.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".17.0.1"><i class="icon-ok" data-reactid=".17.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".17.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".17.1">Create a new state for profile:</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'profile'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/profile'</span><span class="p">,</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">auth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">Users</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">$requireAuth</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">},</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Users</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">$requireAuth</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">getProfile</span><span class="p">(</span><span class="nx">auth</span><span class="p">.</span><span class="nx">uid</span><span class="p">).</span><span class="nx">$loaded</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div><p>We left the <code>controller</code> and <code>templateUrl</code> properties out of the state
configuration temporarily because we haven't created them yet. The <code>auth</code>
dependency is similar to the <code>requireNoAuth</code> dependency we created for
<code>login</code> and <code>register</code>, except it does the inverse, where the user is
redirected to the <code>home</code> state if they're not authenticated. The <code>.catch</code>
function is a shorthand for handling promises if we don't want to provide
a success handler. The <code>profile</code> dependency also ensures authentication,
but resolves to the user's profile using the <code>getProfile</code> function we
created in our <code>Users</code> service. <code>$loaded</code> is a function provided by
both <code>$firebaseObject</code> and <code>$firebaseArray</code> that returns a promise that
gets resolved when the data from Firebase is available locally.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create profile controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create \u003ccode\u003eProfileCtrl\u003c/code\u003e in \u003ccode\u003eapp/users/profile.controller.js\u003c/code\u003e, injecting \u003ccode\u003e$state\u003c/code\u003e, \u003ccode\u003emd5\u003c/code\u003e, \u003ccode\u003eauth\u003c/code\u003e, and \u003ccode\u003eprofile\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".18"><div class="checkbox-holder" data-reactid=".18.0"><div class="chkbox checked" style="display:none;" data-reactid=".18.0.0"><i class="icon-ok" data-reactid=".18.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".18.0.1"><i class="icon-ok" data-reactid=".18.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".18.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".18.1">Create <code>ProfileCtrl</code> in <code>app/users/profile.controller.js</code>, injecting <code>$state</code>, <code>md5</code>, <code>auth</code>, and <code>profile</code></div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'ProfileCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">md5</span><span class="p">,</span> <span class="nx">auth</span><span class="p">,</span> <span class="nx">profile</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">profileCtrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>We'll be using <a href="https://en.gravatar.com/" target="_blank">Gravatar</a> to get profile picture
functionality in our application. Gravatar is a service that provides us with a
user's profile picture when given an email, however the email needs to be
<a href="https://en.wikipedia.org/wiki/MD5" target="_blank">md5 hashed</a>. Luckily, there are many
modules available that can do this for us, and <a href="https://github.com/gdi2290/angular-md5" target="_blank">angular-md5</a>
was already included in our seed codebase.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set profilectrl profile&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003eprofile\u003c/code\u003e on the controller to the one that was resolved by the router&quot;}"><div class="Checkbox " data-reactid=".19"><div class="checkbox-holder" data-reactid=".19.0"><div class="chkbox checked" style="display:none;" data-reactid=".19.0.0"><i class="icon-ok" data-reactid=".19.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".19.0.1"><i class="icon-ok" data-reactid=".19.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".19.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".19.1">Set <code>profile</code> on the controller to the one that was resolved by the router</div></div></div><div class="highlight"><pre><span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">profile</span> <span class="o">=</span> <span class="nx">profile</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create updateprofile&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the following \u003ccode\u003eupdateProfile\u003c/code\u003e function on our controller:&quot;}"><div class="Checkbox " data-reactid=".1a"><div class="checkbox-holder" data-reactid=".1a.0"><div class="chkbox checked" style="display:none;" data-reactid=".1a.0.0"><i class="icon-ok" data-reactid=".1a.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1a.0.1"><i class="icon-ok" data-reactid=".1a.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1a.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1a.1">Create the following <code>updateProfile</code> function on our controller:</div></div></div><div class="highlight"><pre><span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">updateProfile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">emailHash</span> <span class="o">=</span> <span class="nx">md5</span><span class="p">.</span><span class="nx">createHash</span><span class="p">(</span><span class="nx">auth</span><span class="p">.</span><span class="nx">password</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
  <span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">$save</span><span class="p">();</span>
<span class="p">};</span>
</pre></div><p>Here we're getting the current user's email from the <code>auth</code> data that was
resolved from our router, hashing it and setting to <code>emailHash</code> on <code>profile</code>.
<code>displayName</code> will be set from the template we'll be creating next using
<code>ng-model</code>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a helper function \u003ccode\u003egetGravatar\u003c/code\u003e to the \u003ccode\u003eUsers\u003c/code\u003e service that will return the url to a user\u0026#39;s gravatar image when provided a \u003ccode\u003euid\u003c/code\u003e.&quot;}"><div class="Checkbox " data-reactid=".1b"><div class="checkbox-holder" data-reactid=".1b.0"><div class="chkbox checked" style="display:none;" data-reactid=".1b.0.0"><i class="icon-ok" data-reactid=".1b.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1b.0.1"><i class="icon-ok" data-reactid=".1b.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1b.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1b.1">Add a helper function <code>getGravatar</code> to the <code>Users</code> service that will return the url to a user's gravatar image when provided a <code>uid</code>.</div></div></div><div class="highlight"><pre><span class="nx">getGravatar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid</span><span class="p">){</span>
  <span class="k">return</span> <span class="s1">'//www.gravatar.com/avatar/'</span> <span class="o">+</span> <span class="nx">users</span><span class="p">.</span><span class="nx">$getRecord</span><span class="p">(</span><span class="nx">uid</span><span class="p">).</span><span class="nx">emailHash</span><span class="p">;</span>
<span class="p">},</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;include user service profile contoller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/index.html\u003c/code\u003e, include the user service and profile controller&quot;}"><div class="Checkbox " data-reactid=".1c"><div class="checkbox-holder" data-reactid=".1c.0"><div class="chkbox checked" style="display:none;" data-reactid=".1c.0.0"><i class="icon-ok" data-reactid=".1c.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1c.0.1"><i class="icon-ok" data-reactid=".1c.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1c.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1c.1">In <code>app/index.html</code>, include the user service and profile controller</div></div></div><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"auth/auth.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"users/users.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"users/profile.controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set profile state template controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003econtroller\u003c/code\u003e and \u003ccode\u003etemplateUrl\u003c/code\u003e in the \u003ccode\u003eprofile\u003c/code\u003e state to the following:&quot;}"><div class="Checkbox " data-reactid=".1d"><div class="checkbox-holder" data-reactid=".1d.0"><div class="chkbox checked" style="display:none;" data-reactid=".1d.0.0"><i class="icon-ok" data-reactid=".1d.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1d.0.1"><i class="icon-ok" data-reactid=".1d.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1d.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1d.1">Set <code>controller</code> and <code>templateUrl</code> in the <code>profile</code> state to the following:</div></div></div><div class="highlight"><pre><span class="nx">url</span><span class="o">:</span> <span class="s1">'/profile'</span><span class="p">,</span>
<span class="nx">controller</span><span class="o">:</span> <span class="s1">'ProfileCtrl as profileCtrl'</span><span class="p">,</span>
<span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'users/profile.html'</span><span class="p">,</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create profile html&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the edit profile template in \u003ccode\u003eusers/profile.html\u003c/code\u003e with the following code:&quot;}"><div class="Checkbox " data-reactid=".1e"><div class="checkbox-holder" data-reactid=".1e.0"><div class="chkbox checked" style="display:none;" data-reactid=".1e.0.0"><i class="icon-ok" data-reactid=".1e.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1e.0.1"><i class="icon-ok" data-reactid=".1e.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1e.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1e.1">Create the edit profile template in <code>users/profile.html</code> with the following code:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"page-wrapper"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"page-header"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Edit Profile<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">"profileCtrl.updateProfile()"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">ng-hide=</span><span class="s">"profileCtrl.profile.displayName"</span><span class="nt">&gt;</span>
      You'll need a display name before you can start chatting.
    <span class="nt">&lt;/p&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">required</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Display Name"</span> <span class="na">ng-model=</span><span class="s">"profileCtrl.profile.displayName"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">value=</span><span class="s">"Set Display Name"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/div&gt;</span>
</pre></div><p>We should now be able to navigate to <code>http://localhost:4000/#/profile</code>, specify
a display name for our user, submit the form and it should persist when we
refresh the page.</p></div><div class="course-section" id="creating-the-channels-sidebar"><h1>Creating the Channels Sidebar</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;channels&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/3b2e9e79437cd8c26ed31ded9425c140f5c2022d.jpg&quot;}"><div class="Video" data-reactid=".1f"><div class="holder" data-reactid=".1f.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/3b2e9e79437cd8c26ed31ded9425c140f5c2022d.jpg?image_crop_resized=640x400');" data-reactid=".1f.0.0"><div class="fake-play-button" data-reactid=".1f.0.0.0"></div></div></div></div></div><p>Now that our Users can authenticate and have profiles, we can finally start to
create the functionality for Channels. We're going to start by creating the
left sidebar for listing channels and display the current user's profile.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channels service&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a service \u003ccode\u003eChannels\u003c/code\u003e in \u003ccode\u003eapp/channels/channels.service.js\u003c/code\u003e that will return a \u003ccode\u003e$firebaseArray\u003c/code\u003e at the \u003ccode\u003echannels\u003c/code\u003e node.&quot;}"><div class="Checkbox " data-reactid=".1g"><div class="checkbox-holder" data-reactid=".1g.0"><div class="chkbox checked" style="display:none;" data-reactid=".1g.0.0"><i class="icon-ok" data-reactid=".1g.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1g.0.1"><i class="icon-ok" data-reactid=".1g.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1g.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1g.1">Create a service <code>Channels</code> in <code>app/channels/channels.service.js</code> that will return a <code>$firebaseArray</code> at the <code>channels</code> node.</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Channels'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseArray</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">ref</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'channels'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">channels</span> <span class="o">=</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">ref</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">channels</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channels state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a state for \u003ccode\u003echannels\u003c/code\u003e with the following code:&quot;}"><div class="Checkbox " data-reactid=".1h"><div class="checkbox-holder" data-reactid=".1h.0"><div class="chkbox checked" style="display:none;" data-reactid=".1h.0.0"><i class="icon-ok" data-reactid=".1h.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1h.0.1"><i class="icon-ok" data-reactid=".1h.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1h.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1h.1">Create a state for <code>channels</code> with the following code:</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'channels'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/channels'</span><span class="p">,</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">channels</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Channels</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Channels</span><span class="p">.</span><span class="nx">$loaded</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">profile</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">,</span> <span class="nx">Users</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">$requireAuth</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">getProfile</span><span class="p">(</span><span class="nx">auth</span><span class="p">.</span><span class="nx">uid</span><span class="p">).</span><span class="nx">$loaded</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">profile</span><span class="p">){</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">profile</span><span class="p">.</span><span class="nx">displayName</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">profile</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'profile'</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
        <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div><p><code>templateUrl</code> and <code>controller</code> are temporarily omitted since we haven't created
them yet. We're resolving two dependencies here: <code>channels</code>, which is promising
our <code>$firebaseArray</code> of channels, and <code>profile</code>, which is a lot like the
<code>profile</code> dependency in the <code>profile</code> state, but we're ensuring that the user
already a displayName set, otherwise they're taken to the <code>profile</code> state, and
if they're not authenticated, they get sent to the <code>home</code> state.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channels controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create \u003ccode\u003eChannelsCtrl\u003c/code\u003e in \u003ccode\u003eapp/channels/channels.controller.js\u003c/code\u003e, injecting \u003ccode\u003e$state\u003c/code\u003e, \u003ccode\u003eAuth\u003c/code\u003e, \u003ccode\u003eprofile\u003c/code\u003e, and \u003ccode\u003echannels\u003c/code\u003e.&quot;}"><div class="Checkbox " data-reactid=".1i"><div class="checkbox-holder" data-reactid=".1i.0"><div class="chkbox checked" style="display:none;" data-reactid=".1i.0.0"><i class="icon-ok" data-reactid=".1i.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1i.0.1"><i class="icon-ok" data-reactid=".1i.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1i.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1i.1">Create <code>ChannelsCtrl</code> in <code>app/channels/channels.controller.js</code>, injecting <code>$state</code>, <code>Auth</code>, <code>profile</code>, and <code>channels</code>.</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'ChannelsCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">,</span> <span class="nx">Users</span><span class="p">,</span> <span class="nx">profile</span><span class="p">,</span> <span class="nx">channels</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">channelsCtrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set channelsctrl profile channel&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003echannels\u003c/code\u003e and \u003ccode\u003eprofile\u003c/code\u003e to the resolved dependencies from the router&quot;}"><div class="Checkbox " data-reactid=".1j"><div class="checkbox-holder" data-reactid=".1j.0"><div class="chkbox checked" style="display:none;" data-reactid=".1j.0.0"><i class="icon-ok" data-reactid=".1j.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1j.0.1"><i class="icon-ok" data-reactid=".1j.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1j.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1j.1">Set <code>channels</code> and <code>profile</code> to the resolved dependencies from the router</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">profile</span> <span class="o">=</span> <span class="nx">profile</span><span class="p">;</span>
<span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">channels</span> <span class="o">=</span> <span class="nx">channels</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set channelsctrl helper functions&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003egetDisplayName\u003c/code\u003e and \u003ccode\u003egetGravatar\u003c/code\u003e to the respective functions on the \u003ccode\u003eUsers\u003c/code\u003e service.&quot;}"><div class="Checkbox " data-reactid=".1k"><div class="checkbox-holder" data-reactid=".1k.0"><div class="chkbox checked" style="display:none;" data-reactid=".1k.0.0"><i class="icon-ok" data-reactid=".1k.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1k.0.1"><i class="icon-ok" data-reactid=".1k.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1k.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1k.1">Set <code>getDisplayName</code> and <code>getGravatar</code> to the respective functions on the <code>Users</code> service.</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">getDisplayName</span> <span class="o">=</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">getDisplayName</span><span class="p">;</span>
<span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">getGravatar</span> <span class="o">=</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">getGravatar</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create logout function&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003elogout\u003c/code\u003e function that will allow our users to log out, returning them to the \u003ccode\u003ehome\u003c/code\u003e state.&quot;}"><div class="Checkbox " data-reactid=".1l"><div class="checkbox-holder" data-reactid=".1l.0"><div class="chkbox checked" style="display:none;" data-reactid=".1l.0.0"><i class="icon-ok" data-reactid=".1l.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1l.0.1"><i class="icon-ok" data-reactid=".1l.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1l.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1l.1">Create a <code>logout</code> function that will allow our users to log out, returning them to the <code>home</code> state.</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">logout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">Auth</span><span class="p">.</span><span class="nx">$unauth</span><span class="p">();</span>
  <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
<span class="p">};</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;include rooms service controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/index.html\u003c/code\u003e, include the channels service and controller&quot;}"><div class="Checkbox " data-reactid=".1m"><div class="checkbox-holder" data-reactid=".1m.0"><div class="chkbox checked" style="display:none;" data-reactid=".1m.0.0"><i class="icon-ok" data-reactid=".1m.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1m.0.1"><i class="icon-ok" data-reactid=".1m.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1m.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1m.1">In <code>app/index.html</code>, include the channels service and controller</div></div></div><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"users/profile.controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"channels/channels.controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"channels/channels.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;sidebar markup&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the template for our channels sidebar in \u003ccode\u003eapp/channels/index.html\u003c/code\u003e with the following code:&quot;}"><div class="Checkbox " data-reactid=".1n"><div class="checkbox-holder" data-reactid=".1n.0"><div class="chkbox checked" style="display:none;" data-reactid=".1n.0.0"><i class="icon-ok" data-reactid=".1n.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1n.0.1"><i class="icon-ok" data-reactid=".1n.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1n.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1n.1">Create the template for our channels sidebar in <code>app/channels/index.html</code> with the following code:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"slack-name"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>FireSlack<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel-list"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list-head"</span><span class="nt">&gt;</span>Channels<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"my-info"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"user-pic"</span> <span class="na">ng-src=</span><span class="s">"{{ channelsCtrl.getGravatar(channelsCtrl.profile.$id) }}"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"user-info"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"user-name"</span><span class="nt">&gt;</span>
          {{ channelsCtrl.profile.displayName }}
        <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"options"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">ui-sref=</span><span class="s">"profile"</span><span class="nt">&gt;</span>edit profile<span class="nt">&lt;/a&gt;</span>
          /
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">ng-click=</span><span class="s">"channelsCtrl.logout()"</span><span class="nt">&gt;</span>logout<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;update channels state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set the \u003ccode\u003econtroller\u003c/code\u003e and \u003ccode\u003etemplateUrl\u003c/code\u003e in \u003ccode\u003echannels\u003c/code\u003e state to the following:&quot;}"><div class="Checkbox " data-reactid=".1o"><div class="checkbox-holder" data-reactid=".1o.0"><div class="chkbox checked" style="display:none;" data-reactid=".1o.0.0"><i class="icon-ok" data-reactid=".1o.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1o.0.1"><i class="icon-ok" data-reactid=".1o.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1o.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1o.1">Set the <code>controller</code> and <code>templateUrl</code> in <code>channels</code> state to the following:</div></div></div><div class="highlight"><pre><span class="nx">url</span><span class="o">:</span> <span class="s1">'/channels'</span><span class="p">,</span>
<span class="nx">controller</span><span class="o">:</span> <span class="s1">'ChannelsCtrl as channelsCtrl'</span><span class="p">,</span>
<span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'channels/index.html'</span><span class="p">,</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;home state requrienoauth&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add the following \u003ccode\u003eresolve\u003c/code\u003e to the \u003ccode\u003ehome\u003c/code\u003e state:&quot;}"><div class="Checkbox " data-reactid=".1p"><div class="checkbox-holder" data-reactid=".1p.0"><div class="chkbox checked" style="display:none;" data-reactid=".1p.0.0"><i class="icon-ok" data-reactid=".1p.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1p.0.1"><i class="icon-ok" data-reactid=".1p.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1p.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1p.1">Add the following <code>resolve</code> to the <code>home</code> state:</div></div></div><div class="highlight"><pre><span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">requireNoAuth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">Auth</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">$requireAuth</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
      <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'channels'</span><span class="p">);</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;updateprofile go channels&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update the \u003ccode\u003eupdateProfile\u003c/code\u003e function in \u003ccode\u003eProfileCtrl\u003c/code\u003e to send the user to the \u003ccode\u003echannels\u003c/code\u003e state after a successful save.&quot;}"><div class="Checkbox " data-reactid=".1q"><div class="checkbox-holder" data-reactid=".1q.0"><div class="chkbox checked" style="display:none;" data-reactid=".1q.0.0"><i class="icon-ok" data-reactid=".1q.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1q.0.1"><i class="icon-ok" data-reactid=".1q.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1q.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1q.1">Update the <code>updateProfile</code> function in <code>ProfileCtrl</code> to send the user to the <code>channels</code> state after a successful save.</div></div></div><div class="highlight"><pre><span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">updateProfile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">emailHash</span> <span class="o">=</span> <span class="nx">md5</span><span class="p">.</span><span class="nx">createHash</span><span class="p">(</span><span class="nx">auth</span><span class="p">.</span><span class="nx">password</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
  <span class="nx">profileCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">$save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'channels'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div><p>This <code>requireNoAuth</code> dependency is a lot like the one on <code>login</code> and <code>register</code>
but it sends the user to the <code>channels</code> state. If you want, you can change the
<code>requireNoAuth</code> dependency on <code>login</code> and <code>register</code> to also send the user to
the <code>channels</code> state as well. Now when we're logged in and visit
<code>http://localhost:4000</code> we should be sent to the <code>channels</code> state. In that
state, we can see the sidebar we just created for our application. There should
be the logged in user's name and Gravatar at the bottom of the sidebar, and an
edit profile and logout link next to it. We're using the <code>ui-sref</code> directive
that comes with <code>ui-router</code> to specify what state we should navigate to on
click. If we click on edit profile, we can update the user's <code>displayName</code> and
it should send us back to the <code>channels</code> state when we submit the form. The
logout link should log us out and send us back to the <code>home</code> state. Now let's
create the view to create channels.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channels create state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new state \u003ccode\u003echannels.create\u003c/code\u003e:&quot;}"><div class="Checkbox " data-reactid=".1r"><div class="checkbox-holder" data-reactid=".1r.0"><div class="chkbox checked" style="display:none;" data-reactid=".1r.0.0"><i class="icon-ok" data-reactid=".1r.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1r.0.1"><i class="icon-ok" data-reactid=".1r.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1r.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1r.1">Create a new state <code>channels.create</code>:</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'channels.create'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/create'</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'channels/create.html'</span><span class="p">,</span>
  <span class="nx">controller</span><span class="o">:</span> <span class="s1">'ChannelsCtrl as channelsCtrl'</span>
<span class="p">})</span>
</pre></div><p>This state is a child state of the <code>channels</code> controller (the dot notation in
the state name specifies <code>parentState.childState</code>). This state will also use
<code>ChannelsCtrl</code>. We'll want to render our child states to the right of the
sidebar. We need to declare another <code>ui-view</code> tag in order for our child
states to appear. You can read more about <code>ui-router</code>'s nested states at this
<a href="https://github.com/angular-ui/ui-router/wiki/Nested-States-and-Nested-Views" target="_blank">Github Wiki</a>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add ui view&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add the \u003ccode\u003emessage-pane\u003c/code\u003e div with a \u003ccode\u003eui-view\u003c/code\u003e tag in \u003ccode\u003eapp/channels/index.html\u003c/code\u003e. This should be at the end of the \u003ccode\u003emain\u003c/code\u003e div after the \u003ccode\u003esidebar\u003c/code\u003e div.&quot;}"><div class="Checkbox " data-reactid=".1s"><div class="checkbox-holder" data-reactid=".1s.0"><div class="chkbox checked" style="display:none;" data-reactid=".1s.0.0"><i class="icon-ok" data-reactid=".1s.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1s.0.1"><i class="icon-ok" data-reactid=".1s.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1s.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1s.1">Add the <code>message-pane</code> div with a <code>ui-view</code> tag in <code>app/channels/index.html</code>. This should be at the end of the <code>main</code> div after the <code>sidebar</code> div.</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message-pane"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ui-view&gt;&lt;/ui-view&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channelsctrl newchannel&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a \u003ccode\u003enewChannel\u003c/code\u003e object on \u003ccode\u003eChannelsCtrl\u003c/code\u003e with a blank name&quot;}"><div class="Checkbox " data-reactid=".1t"><div class="checkbox-holder" data-reactid=".1t.0"><div class="chkbox checked" style="display:none;" data-reactid=".1t.0.0"><i class="icon-ok" data-reactid=".1t.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1t.0.1"><i class="icon-ok" data-reactid=".1t.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1t.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1t.1">Add a <code>newChannel</code> object on <code>ChannelsCtrl</code> with a blank name</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">newChannel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">''</span>
<span class="p">};</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channelsctrl createchannel&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003ecreateChannel\u003c/code\u003e function on \u003ccode\u003eChannelsCtrl\u003c/code\u003e.&quot;}"><div class="Checkbox " data-reactid=".1u"><div class="checkbox-holder" data-reactid=".1u.0"><div class="chkbox checked" style="display:none;" data-reactid=".1u.0.0"><i class="icon-ok" data-reactid=".1u.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1u.0.1"><i class="icon-ok" data-reactid=".1u.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1u.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1u.1">Create a <code>createChannel</code> function on <code>ChannelsCtrl</code>.</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">createChannel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">channels</span><span class="p">.</span><span class="nx">$add</span><span class="p">(</span><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">newChannel</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">newChannel</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">''</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div><p>The <code>$add</code> function on the channels <code>$firebaseArray</code> provides similar
functionality to the <code>.push()</code> function on a Javascript <code>Array</code>, but keeps our
data in sync with Firebase, while returning a promise. Once the new channel is
created we'll need to clear out the <code>newChannel</code> object.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create createchannel html&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the a form in \u003ccode\u003eapp/channels/create.html\u003c/code\u003e for creating a new channel&quot;}"><div class="Checkbox " data-reactid=".1v"><div class="checkbox-holder" data-reactid=".1v.0"><div class="chkbox checked" style="display:none;" data-reactid=".1v.0.0"><i class="icon-ok" data-reactid=".1v.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1v.0.1"><i class="icon-ok" data-reactid=".1v.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1v.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1v.1">Create the a form in <code>app/channels/create.html</code> for creating a new channel</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Create a channel<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">"channelsCtrl.createChannel()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Channel Name"</span> <span class="na">ng-model=</span><span class="s">"channelsCtrl.newChannel.name"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">value=</span><span class="s">"Create Channel"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;channel list markup&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the channels listing in \u003ccode\u003eapp/channels/index.html\u003c/code\u003e using the following markup in the \u003ccode\u003echannel-list\u003c/code\u003e div below the \u003ccode\u003elist-head\u003c/code\u003e div:&quot;}"><div class="Checkbox " data-reactid=".1w"><div class="checkbox-holder" data-reactid=".1w.0"><div class="chkbox checked" style="display:none;" data-reactid=".1w.0.0"><i class="icon-ok" data-reactid=".1w.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1w.0.1"><i class="icon-ok" data-reactid=".1w.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1w.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1w.1">Create the channels listing in <code>app/channels/index.html</code> using the following markup in the <code>channel-list</code> div below the <code>list-head</code> div:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel-list"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list-head"</span><span class="nt">&gt;</span>Channels<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel"</span> <span class="na">ng-repeat=</span><span class="s">"channel in channelsCtrl.channels"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a&gt;</span># {{ channel.name }}<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>We're using the <code>ng-repeat</code> directive to iterate over our array of <code>channels</code>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;channel create link&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a link to the \u003ccode\u003echannels.create\u003c/code\u003e state below the channel listing:&quot;}"><div class="Checkbox " data-reactid=".1x"><div class="checkbox-holder" data-reactid=".1x.0"><div class="chkbox checked" style="display:none;" data-reactid=".1x.0.0"><i class="icon-ok" data-reactid=".1x.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1x.0.1"><i class="icon-ok" data-reactid=".1x.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1x.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1x.1">Create a link to the <code>channels.create</code> state below the channel listing:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel-list"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list-head"</span><span class="nt">&gt;</span>Channels<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel"</span> <span class="na">ng-repeat=</span><span class="s">"channel in channelsCtrl.channels"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a&gt;</span># {{ channel.name }}<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel create"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">ui-sref=</span><span class="s">"channels.create"</span><span class="nt">&gt;</span>+ create channel<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>We're now able to click on the create channel link and start creating
channels!</p></div><div class="course-section" id="adding-messaging-functionality"><h1>Adding Messaging Functionality</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;channelmessages&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/b502036749aa1d475285d7fa9147cb70d82291bf.jpg&quot;}"><div class="Video" data-reactid=".1y"><div class="holder" data-reactid=".1y.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/b502036749aa1d475285d7fa9147cb70d82291bf.jpg?image_crop_resized=640x400');" data-reactid=".1y.0.0"><div class="fake-play-button" data-reactid=".1y.0.0.0"></div></div></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create messages service&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a service for retrieving messages&quot;}"><div class="Checkbox " data-reactid=".1z"><div class="checkbox-holder" data-reactid=".1z.0"><div class="chkbox checked" style="display:none;" data-reactid=".1z.0.0"><i class="icon-ok" data-reactid=".1z.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".1z.0.1"><i class="icon-ok" data-reactid=".1z.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".1z.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".1z.1">Create a service for retrieving messages</div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Messages'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$firebaseArray</span><span class="p">,</span> <span class="nx">FirebaseUrl</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">channelMessagesRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'channelMessages'</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">forChannel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">channelId</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">channelMessagesRef</span><span class="p">.</span><span class="nx">child</span><span class="p">(</span><span class="nx">channelId</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
</pre></div><p>The <code>forChannel</code> function on our service returns a <code>$firebaseArray</code> of messages
when provided a <code>channelId</code>. Later in this tutorial, we'll create a <code>forUsers</code>
function for retrieving direct messages.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create messages state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new state \u003ccode\u003echannels.messages\u003c/code\u003e with the following code:&quot;}"><div class="Checkbox " data-reactid=".20"><div class="checkbox-holder" data-reactid=".20.0"><div class="chkbox checked" style="display:none;" data-reactid=".20.0.0"><i class="icon-ok" data-reactid=".20.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".20.0.1"><i class="icon-ok" data-reactid=".20.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".20.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".20.1">Create a new state <code>channels.messages</code> with the following code:</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'channels.messages'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/{channelId}/messages'</span><span class="p">,</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">messages</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">,</span> <span class="nx">Messages</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Messages</span><span class="p">.</span><span class="nx">forChannel</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">.</span><span class="nx">channelId</span><span class="p">).</span><span class="nx">$loaded</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">channelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">,</span> <span class="nx">channels</span><span class="p">){</span>
      <span class="k">return</span> <span class="s1">'#'</span><span class="o">+</span><span class="nx">channels</span><span class="p">.</span><span class="nx">$getRecord</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">.</span><span class="nx">channelId</span><span class="p">).</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div><p>This state will again be a child state of <code>channels</code>. Our url will have a
<code>channelId</code> parameter. We can access this parameter with <code>$stateParams</code>,
provided by <code>ui-router</code>. We're resolving <code>messages</code>, which is using the
<code>forChannel</code> function from our <code>Messages</code> service, and <code>channelName</code>
which we'll be using to display the channel's name in our messages pane.
Channel names will be prefixed with a <code>#</code>. The <code>channels</code> dependency we're
injecting is coming from the parent state <code>channels</code> since child states
inherit their parent's dependencies. We'll come back and add the <code>controller</code>
and <code>templateUrl</code> properties once we create our controller and template.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create messagesctrl&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new controller \u003ccode\u003eMessagesCtrl\u003c/code\u003e in \u003ccode\u003eapp/channels/messages.controller.js\u003c/code\u003e. We\u0026#39;ll be injecting \u003ccode\u003eprofile\u003c/code\u003e, \u003ccode\u003echannelName\u003c/code\u003e, and \u003ccode\u003emessages\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".21"><div class="checkbox-holder" data-reactid=".21.0"><div class="chkbox checked" style="display:none;" data-reactid=".21.0.0"><i class="icon-ok" data-reactid=".21.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".21.0.1"><i class="icon-ok" data-reactid=".21.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".21.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".21.1">Create a new controller <code>MessagesCtrl</code> in <code>app/channels/messages.controller.js</code>. We'll be injecting <code>profile</code>, <code>channelName</code>, and <code>messages</code></div></div></div><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'angularfireSlackApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MessagesCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">profile</span><span class="p">,</span> <span class="nx">channelName</span><span class="p">,</span> <span class="nx">messages</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">messagesCtrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div><p>Again, the <code>profile</code> dependency that we're injecting will actually come from
the parent state <code>channels</code> that resolves to the current user's profile.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set messages channelname&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003emessages\u003c/code\u003e and \u003ccode\u003echannelName\u003c/code\u003e on \u003ccode\u003emessagesCtrl\u003c/code\u003e to the respective dependencies&quot;}"><div class="Checkbox " data-reactid=".22"><div class="checkbox-holder" data-reactid=".22.0"><div class="chkbox checked" style="display:none;" data-reactid=".22.0.0"><i class="icon-ok" data-reactid=".22.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".22.0.1"><i class="icon-ok" data-reactid=".22.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".22.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".22.1">Set <code>messages</code> and <code>channelName</code> on <code>messagesCtrl</code> to the respective dependencies</div></div></div><div class="highlight"><pre><span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">messages</span> <span class="o">=</span> <span class="nx">messages</span><span class="p">;</span>
<span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">channelName</span> <span class="o">=</span> <span class="nx">channelName</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set messagesctrl messages&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003emessage\u003c/code\u003e on \u003ccode\u003emessagesCtrl\u003c/code\u003e to an empty string.&quot;}"><div class="Checkbox " data-reactid=".23"><div class="checkbox-holder" data-reactid=".23.0"><div class="chkbox checked" style="display:none;" data-reactid=".23.0.0"><i class="icon-ok" data-reactid=".23.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".23.0.1"><i class="icon-ok" data-reactid=".23.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".23.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".23.1">Set <code>message</code> on <code>messagesCtrl</code> to an empty string.</div></div></div><div class="highlight"><pre><span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create sendmessage&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a function \u003ccode\u003esendMessage\u003c/code\u003e to \u003ccode\u003e$add\u003c/code\u003e a message to \u003ccode\u003emessages\u003c/code\u003e.&quot;}"><div class="Checkbox " data-reactid=".24"><div class="checkbox-holder" data-reactid=".24.0"><div class="chkbox checked" style="display:none;" data-reactid=".24.0.0"><i class="icon-ok" data-reactid=".24.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".24.0.1"><i class="icon-ok" data-reactid=".24.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".24.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".24.1">Create a function <code>sendMessage</code> to <code>$add</code> a message to <code>messages</code>.</div></div></div><div class="highlight"><pre><span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">sendMessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">$add</span><span class="p">({</span>
      <span class="nx">uid</span><span class="o">:</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">$id</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
      <span class="nx">timestamp</span><span class="o">:</span> <span class="nx">Firebase</span><span class="p">.</span><span class="nx">ServerValue</span><span class="p">.</span><span class="nx">TIMESTAMP</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
      <span class="nx">messagesCtrl</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div><p>A message object will need to contain <code>uid</code>, which will be how we identify
who sent the message. <code>body</code> contains the message our user input, and
<code>timestamp</code> is a constant from <code>Firebase</code> that tells the Firebase servers
to use the their clock for the timestamp. When a message sends successfully,
we'll want to clear out <code>messagesCtrl.message</code> so the user can type a new
message.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;include messages service controller&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/index.html\u003c/code\u003e, include our messages service and controller.&quot;}"><div class="Checkbox " data-reactid=".25"><div class="checkbox-holder" data-reactid=".25.0"><div class="chkbox checked" style="display:none;" data-reactid=".25.0.0"><i class="icon-ok" data-reactid=".25.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".25.0.1"><i class="icon-ok" data-reactid=".25.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".25.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".25.1">In <code>app/index.html</code>, include our messages service and controller.</div></div></div><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"channels/channels.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"channels/messages.service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"channels/messages.controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create messages markup&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create the following template in \u003ccode\u003eapp/channels/messages.html\u003c/code\u003e:&quot;}"><div class="Checkbox " data-reactid=".26"><div class="checkbox-holder" data-reactid=".26.0"><div class="chkbox checked" style="display:none;" data-reactid=".26.0.0"><i class="icon-ok" data-reactid=".26.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".26.0.1"><i class="icon-ok" data-reactid=".26.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".26.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".26.1">Create the following template in <code>app/channels/messages.html</code>:</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>{{ messagesCtrl.channelName }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message-wrap"</span> <span class="na">ng-repeat=</span><span class="s">"message in messagesCtrl.messages"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"user-pic"</span> <span class="na">ng-src=</span><span class="s">"{{ channelsCtrl.getGravatar(message.uid) }}"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message-info"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"user-name"</span><span class="nt">&gt;</span>
      {{ channelsCtrl.getDisplayName(message.uid) }}
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"timestamp"</span><span class="nt">&gt;</span>{{ message.timestamp | date:'short' }}<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message"</span><span class="nt">&gt;</span>
     {{ message.body }}
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"message-form"</span> <span class="na">ng-submit=</span><span class="s">"messagesCtrl.sendMessage()"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"messagesCtrl.message"</span> <span class="na">placeholder=</span><span class="s">"Type a message..."</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-btn"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Send<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div><p>Here we're creating a header to display the <code>channelName</code> from our controller.
Then we're <code>ng-repeat</code>ing over <code>messages</code> and using <code>message.uid</code> and the
helper functions from <code>channelsCtrl</code> to get the user's display name and
Gravatar. We're also using Angular's <code>date</code> filter on the timestamp to display
a short timestamp. Finally, at the bottom of our view we have the form for
sending messages which submits to the <code>sendMessage</code> function from our
controller.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;update messages state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update the \u003ccode\u003echannels.messages\u003c/code\u003e state to use the template and controller we just created.&quot;}"><div class="Checkbox " data-reactid=".27"><div class="checkbox-holder" data-reactid=".27.0"><div class="chkbox checked" style="display:none;" data-reactid=".27.0.0"><i class="icon-ok" data-reactid=".27.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".27.0.1"><i class="icon-ok" data-reactid=".27.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".27.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".27.1">Update the <code>channels.messages</code> state to use the template and controller we just created.</div></div></div><div class="highlight"><pre><span class="nx">url</span><span class="o">:</span> <span class="s1">'/{channelId}/messages'</span><span class="p">,</span>
<span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'channels/messages.html'</span><span class="p">,</span>
<span class="nx">controller</span><span class="o">:</span> <span class="s1">'MessagesCtrl as messagesCtrl'</span><span class="p">,</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add channels links&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update the channel links in the sidebar so we can navigate to channels.&quot;}"><div class="Checkbox " data-reactid=".28"><div class="checkbox-holder" data-reactid=".28.0"><div class="chkbox checked" style="display:none;" data-reactid=".28.0.0"><i class="icon-ok" data-reactid=".28.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".28.0.1"><i class="icon-ok" data-reactid=".28.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".28.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".28.1">Update the channel links in the sidebar so we can navigate to channels.</div></div></div><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">ui-sref=</span><span class="s">"channels.messages({channelId: channel.$id})"</span> <span class="na">ui-sref-active=</span><span class="s">"selected"</span><span class="nt">&gt;</span># {{ channel.name }}<span class="nt">&lt;/a&gt;</span>
</pre></div><p>We're specifying the parameters for the <code>channels.messages</code> state within the
<code>ui-sref</code> directive. The <code>ui-sref-active</code> directive will add the specified
class (<code>selected</code> in our case) to the element when a state specified in a
sibling or child <code>ui-sref</code> directive. Now we should be able to navigate between
channels and start chatting!</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;update createchannel&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update the \u003ccode\u003ecreateChannel\u003c/code\u003e function to send the user to the newly created channel upon creation.&quot;}"><div class="Checkbox " data-reactid=".29"><div class="checkbox-holder" data-reactid=".29.0"><div class="chkbox checked" style="display:none;" data-reactid=".29.0.0"><i class="icon-ok" data-reactid=".29.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".29.0.1"><i class="icon-ok" data-reactid=".29.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".29.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".29.1">Update the <code>createChannel</code> function to send the user to the newly created channel upon creation.</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">createChannel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">channels</span><span class="p">.</span><span class="nx">$add</span><span class="p">(</span><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">newChannel</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ref</span><span class="p">){</span>
    <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'channels.messages'</span><span class="p">,</span> <span class="p">{</span><span class="nx">channelId</span><span class="o">:</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">key</span><span class="p">()});</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div></div><div class="course-section" id="creating-direct-messages"><h1>Creating Direct Messages</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;directmessages&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/a0869189286833cea9601bb2134a51abd81a70a0.jpg&quot;}"><div class="Video" data-reactid=".2a"><div class="holder" data-reactid=".2a.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/a0869189286833cea9601bb2134a51abd81a70a0.jpg?image_crop_resized=640x400');" data-reactid=".2a.0.0"><div class="fake-play-button" data-reactid=".2a.0.0.0"></div></div></div></div></div><p>Now that we have working channels with messaging, adding direct messages will
be easier since we can reuse a lot of the existing functionality we have.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add usermessages ref&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In our \u003ccode\u003eMessages\u003c/code\u003e service, add a Firebase reference to the \u003ccode\u003euserMessages\u003c/code\u003e node.&quot;}"><div class="Checkbox " data-reactid=".2b"><div class="checkbox-holder" data-reactid=".2b.0"><div class="chkbox checked" style="display:none;" data-reactid=".2b.0.0"><i class="icon-ok" data-reactid=".2b.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2b.0.1"><i class="icon-ok" data-reactid=".2b.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2b.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2b.1">In our <code>Messages</code> service, add a Firebase reference to the <code>userMessages</code> node.</div></div></div><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">userMessagesRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'userMessages'</span><span class="p">)</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add messages forusers&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a \u003ccode\u003eforUsers\u003c/code\u003e function to our \u003ccode\u003eMessages\u003c/code\u003e service to retrieve direct messages between two users, given their uids.&quot;}"><div class="Checkbox " data-reactid=".2c"><div class="checkbox-holder" data-reactid=".2c.0"><div class="chkbox checked" style="display:none;" data-reactid=".2c.0.0"><i class="icon-ok" data-reactid=".2c.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2c.0.1"><i class="icon-ok" data-reactid=".2c.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2c.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2c.1">Add a <code>forUsers</code> function to our <code>Messages</code> service to retrieve direct messages between two users, given their uids.</div></div></div><div class="highlight"><pre><span class="k">return</span> <span class="p">{</span>
  <span class="nx">forChannel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">channelId</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">channelMessagesRef</span><span class="p">.</span><span class="nx">child</span><span class="p">(</span><span class="nx">channelId</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">forUsers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid1</span><span class="p">,</span> <span class="nx">uid2</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">uid1</span> <span class="o">&lt;</span> <span class="nx">uid2</span> <span class="o">?</span> <span class="nx">uid1</span><span class="o">+</span><span class="s1">'/'</span><span class="o">+</span><span class="nx">uid2</span> <span class="o">:</span> <span class="nx">uid2</span><span class="o">+</span><span class="s1">'/'</span><span class="o">+</span><span class="nx">uid1</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">userMessagesRef</span><span class="p">.</span><span class="nx">child</span><span class="p">(</span><span class="nx">path</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div><p>We'll be storing our direct messages in Firebase like so:</p><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"userMessages"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"simplelogin:1"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"simplelogin:2"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"messageId1"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"uid"</span><span class="o">:</span> <span class="s2">"simplelogin:1"</span><span class="p">,</span>
          <span class="s2">"body"</span><span class="o">:</span> <span class="s2">"Hello!"</span><span class="p">,</span>
          <span class="s2">"timestamp"</span><span class="o">:</span> <span class="nx">Firebase</span><span class="p">.</span><span class="nx">ServerValue</span><span class="p">.</span><span class="nx">TIMESTAMP</span>
        <span class="p">},</span>
        <span class="s2">"messageId2"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"uid"</span><span class="o">:</span> <span class="s2">"simplelogin:2"</span><span class="p">,</span>
          <span class="s2">"body"</span><span class="o">:</span> <span class="s2">"Hey!"</span><span class="p">,</span>
          <span class="s2">"timestamp"</span><span class="o">:</span> <span class="nx">Firebase</span><span class="p">.</span><span class="nx">ServerValue</span><span class="p">.</span><span class="nx">TIMESTAMP</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div><p>Since we always want to reference the same path in our Firebase regardless of
which id was passed first, we'll need to sort our ids before referencing the
direct messages.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create channels direct state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a new state \u003ccode\u003echannels.direct\u003c/code\u003e with the following code:&quot;}"><div class="Checkbox " data-reactid=".2d"><div class="checkbox-holder" data-reactid=".2d.0"><div class="chkbox checked" style="display:none;" data-reactid=".2d.0.0"><i class="icon-ok" data-reactid=".2d.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2d.0.1"><i class="icon-ok" data-reactid=".2d.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2d.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2d.1">Create a new state <code>channels.direct</code> with the following code:</div></div></div><div class="highlight"><pre><span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'channels.direct'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">'/{uid}/messages/direct'</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'channels/messages.html'</span><span class="p">,</span>
  <span class="nx">controller</span><span class="o">:</span> <span class="s1">'MessagesCtrl as messagesCtrl'</span><span class="p">,</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">messages</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">,</span> <span class="nx">Messages</span><span class="p">,</span> <span class="nx">profile</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Messages</span><span class="p">.</span><span class="nx">forUsers</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">.</span><span class="nx">uid</span><span class="p">,</span> <span class="nx">profile</span><span class="p">.</span><span class="nx">$id</span><span class="p">).</span><span class="nx">$loaded</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">channelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">,</span> <span class="nx">Users</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">all</span><span class="p">.</span><span class="nx">$loaded</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="s1">'@'</span><span class="o">+</span><span class="nx">Users</span><span class="p">.</span><span class="nx">getDisplayName</span><span class="p">(</span><span class="nx">$stateParams</span><span class="p">.</span><span class="nx">uid</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div><p>This state is almost identical to <code>channels.messages</code>, using the same
<code>templateUrl</code> and <code>controller</code>. We're using a different <code>url</code>, and the
<code>messages</code> dependency is using the <code>Messages.forUsers</code> function that we just
created. The <code>channelName</code> dependency also looks up the other user's display
name, and prefixes it with <code>@</code>.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;inject users channels&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Inject the \u003ccode\u003eUsers\u003c/code\u003e service into \u003ccode\u003eChannelsCtrl\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".2e"><div class="checkbox-holder" data-reactid=".2e.0"><div class="chkbox checked" style="display:none;" data-reactid=".2e.0.0"><i class="icon-ok" data-reactid=".2e.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2e.0.1"><i class="icon-ok" data-reactid=".2e.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2e.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2e.1">Inject the <code>Users</code> service into <code>ChannelsCtrl</code></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set users channelsctrl&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Set \u003ccode\u003eusers\u003c/code\u003e on \u003ccode\u003echannelsCtrl\u003c/code\u003e to \u003ccode\u003eUsers.all\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".2f"><div class="checkbox-holder" data-reactid=".2f.0"><div class="chkbox checked" style="display:none;" data-reactid=".2f.0.0"><i class="icon-ok" data-reactid=".2f.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2f.0.1"><i class="icon-ok" data-reactid=".2f.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2f.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2f.1">Set <code>users</code> on <code>channelsCtrl</code> to <code>Users.all</code></div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">users</span> <span class="o">=</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">all</span><span class="p">;</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add direct messages sidebar&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update the sidebar to have to list all users and link to their conversations.&quot;}"><div class="Checkbox " data-reactid=".2g"><div class="checkbox-holder" data-reactid=".2g.0"><div class="chkbox checked" style="display:none;" data-reactid=".2g.0.0"><i class="icon-ok" data-reactid=".2g.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2g.0.1"><i class="icon-ok" data-reactid=".2g.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2g.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2g.1">Update the sidebar to have to list all users and link to their conversations.</div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel create"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">ui-sref=</span><span class="s">"channels.create"</span><span class="nt">&gt;</span>+ create channel<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list-head"</span><span class="nt">&gt;</span>Direct Messages<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"channel"</span> <span class="na">ng-repeat=</span><span class="s">"user in channelsCtrl.users"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">ng-if=</span><span class="s">"user.$id !== channelsCtrl.profile.$id"</span> <span class="na">ui-sref=</span><span class="s">"channels.direct({uid: user.$id})"</span> <span class="na">ui-sref-active=</span><span class="s">"selected"</span><span class="nt">&gt;</span>
    {{ user.displayName }}
  <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>We're now able to chat directly to other users in our application!</p></div><div class="course-section" id="adding-presence-to-users"><h1>Adding Presence to Users</h1><div data-react-class="Course.Video" data-react-props="{&quot;slug&quot;:&quot;presence&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/f8f43fadf6681e7982e2c914cfb2502eaea1c587.jpg&quot;}"><div class="Video" data-reactid=".2h"><div class="holder" data-reactid=".2h.0"><div class="shot" style="background-image:url('https://embed-ssl.wistia.com/deliveries/f8f43fadf6681e7982e2c914cfb2502eaea1c587.jpg?image_crop_resized=640x400');" data-reactid=".2h.0.0"><div class="fake-play-button" data-reactid=".2h.0.0.0"></div></div></div></div></div><p>Having direct messaging is an important feature to any chat application, but
it's also very useful to know what users are online. Firebase makes this very
easy for us. Read the <a href="https://www.firebase.com/docs/web/guide/offline-capabilities.html#section-sample" target="_blank">Firebase Documentation</a>
to see some example code using presence. While this code is written using the
core Firebase library, we're going to replicate the same functionality using
AngularFire.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add users connectedref&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a reference to the special \u003ccode\u003e.info/connected\u003c/code\u003e node on your Firebase&quot;}"><div class="Checkbox " data-reactid=".2i"><div class="checkbox-holder" data-reactid=".2i.0"><div class="chkbox checked" style="display:none;" data-reactid=".2i.0.0"><i class="icon-ok" data-reactid=".2i.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2i.0.1"><i class="icon-ok" data-reactid=".2i.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2i.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2i.1">Add a reference to the special <code>.info/connected</code> node on your Firebase</div></div></div><div class="highlight"><pre><span class="kd">var</span> <span class="nx">usersRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'users'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">connectedRef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Firebase</span><span class="p">(</span><span class="nx">FirebaseUrl</span><span class="o">+</span><span class="s1">'.info/connected'</span><span class="p">);</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create users setonline&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003esetOnline\u003c/code\u003e function for our \u003ccode\u003eUsers\u003c/code\u003e service.&quot;}"><div class="Checkbox " data-reactid=".2j"><div class="checkbox-holder" data-reactid=".2j.0"><div class="chkbox checked" style="display:none;" data-reactid=".2j.0.0"><i class="icon-ok" data-reactid=".2j.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2j.0.1"><i class="icon-ok" data-reactid=".2j.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2j.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2j.1">Create a <code>setOnline</code> function for our <code>Users</code> service.</div></div></div><div class="highlight"><pre><span class="nx">setOnline</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">connected</span> <span class="o">=</span> <span class="nx">$firebaseObject</span><span class="p">(</span><span class="nx">connectedRef</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">online</span> <span class="o">=</span> <span class="nx">$firebaseArray</span><span class="p">(</span><span class="nx">usersRef</span><span class="p">.</span><span class="nx">child</span><span class="p">(</span><span class="nx">uid</span><span class="o">+</span><span class="s1">'/online'</span><span class="p">));</span>

  <span class="nx">connected</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">connected</span><span class="p">.</span><span class="nx">$value</span> <span class="o">===</span> <span class="kc">true</span><span class="p">){</span>
      <span class="nx">online</span><span class="p">.</span><span class="nx">$add</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">connectedRef</span><span class="p">){</span>
        <span class="nx">connectedRef</span><span class="p">.</span><span class="nx">onDisconnect</span><span class="p">().</span><span class="nx">remove</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div><p>This function watches for changes at the <code>.info/connected</code> node and will <code>$add</code>
any open connections to a <code>$firebaseArray</code> keyed under <code>online</code> within the
user's profile. This allows us to track multiple connections (in case the user
has multiple browser windows open), which will get removed when the client
disconnects.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;set online state&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eapp/channels/channels.controller.js\u003c/code\u003e set the current user as online.&quot;}"><div class="Checkbox " data-reactid=".2k"><div class="checkbox-holder" data-reactid=".2k.0"><div class="chkbox checked" style="display:none;" data-reactid=".2k.0.0"><i class="icon-ok" data-reactid=".2k.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2k.0.1"><i class="icon-ok" data-reactid=".2k.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2k.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2k.1">In <code>app/channels/channels.controller.js</code> set the current user as online.</div></div></div><div class="highlight"><pre><span class="nx">Users</span><span class="p">.</span><span class="nx">setOnline</span><span class="p">(</span><span class="nx">profile</span><span class="p">.</span><span class="nx">$id</span><span class="p">);</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;update logout&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Update our logout function to wipe out the \u003ccode\u003eonline\u003c/code\u003e array when the user logs out&quot;}"><div class="Checkbox " data-reactid=".2l"><div class="checkbox-holder" data-reactid=".2l.0"><div class="chkbox checked" style="display:none;" data-reactid=".2l.0.0"><i class="icon-ok" data-reactid=".2l.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2l.0.1"><i class="icon-ok" data-reactid=".2l.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2l.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2l.1">Update our logout function to wipe out the <code>online</code> array when the user logs out</div></div></div><div class="highlight"><pre><span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">logout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">online</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">channelsCtrl</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">$save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">Auth</span><span class="p">.</span><span class="nx">$unauth</span><span class="p">();</span>
    <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add user info presence&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a presence icon next to the current user\u0026#39;s display name in \u003ccode\u003eapp/channels/index.html\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".2m"><div class="checkbox-holder" data-reactid=".2m.0"><div class="chkbox checked" style="display:none;" data-reactid=".2m.0.0"><i class="icon-ok" data-reactid=".2m.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2m.0.1"><i class="icon-ok" data-reactid=".2m.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2m.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2m.1">Add a presence icon next to the current user's display name in <code>app/channels/index.html</code></div></div></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"user-name"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"presence"</span> <span class="na">ng-class=</span><span class="s">"{online: channelsCtrl.profile.online}"</span><span class="nt">&gt;&lt;/span&gt;</span>
  {{ channelsCtrl.profile.displayName }}
<span class="nt">&lt;/div&gt;</span>
</pre></div><p>We're also dynamically adding the <code>online</code> class to the span tag using
<code>ng-class</code>, based on if the <code>$firebaseArray</code> containing connections in the
profile is present.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add user list presence&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Add a presence icon next to the current user\u0026#39;s display name in \u003ccode\u003eapp/channels/index.html\u003c/code\u003e&quot;}"><div class="Checkbox " data-reactid=".2n"><div class="checkbox-holder" data-reactid=".2n.0"><div class="chkbox checked" style="display:none;" data-reactid=".2n.0.0"><i class="icon-ok" data-reactid=".2n.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2n.0.1"><i class="icon-ok" data-reactid=".2n.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2n.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2n.1">Add a presence icon next to the current user's display name in <code>app/channels/index.html</code></div></div></div><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">ng-if=</span><span class="s">"user.$id !== channelsCtrl.profile.$id"</span> <span class="na">ui-sref=</span><span class="s">"channels.direct({uid: user.$id})"</span> <span class="na">ui-sref-active=</span><span class="s">"selected"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"presence"</span> <span class="na">ng-class=</span><span class="s">"{online: user.online}"</span><span class="nt">&gt;&lt;/span&gt;</span>
  {{ user.displayName }}
<span class="nt">&lt;/a&gt;</span>
</pre></div><p>We're now able to see when our users are online! Our application is almost
ready for production. In the next sections we will go over securing our data
and deploying our application live.</p></div><div class="course-section" id="securing-your-data-with-security-rules"><h1>Securing Your Data with Security Rules</h1><p>When you first create a Firebase, the default security rules allow full read
and write access. While this makes it a lot easier to get started developing,
it's always strongly recommended that you create security rules to make sure
that your data stays consistent and secured. There are three kinds of rules,
<code>.read</code>, <code>.write</code>, and <code>.validate</code> for controlling access and validating your
data.</p><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;read firebase security docs&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Read the \u003ca href=\&quot;https://www.firebase.com/docs/web/guide/structuring-data.html\&quot; target=\&quot;_blank\&quot;\u003eFirebase Documentation on Security\u003c/a\u003e&quot;}"><div class="Checkbox " data-reactid=".2o"><div class="checkbox-holder" data-reactid=".2o.0"><div class="chkbox checked" style="display:none;" data-reactid=".2o.0.0"><i class="icon-ok" data-reactid=".2o.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2o.0.1"><i class="icon-ok" data-reactid=".2o.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2o.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2o.1">Read the <a href="https://www.firebase.com/docs/web/guide/structuring-data.html" target="_blank">Firebase Documentation on Security</a></div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;add security rules&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Open up your Firebase Forge (the \u003ccode\u003eFirebaseUrl\u003c/code\u003e constant in \u003ccode\u003eapp/app.js\u003c/code\u003e) and add the following rules under the Security \u0026amp; Rules section of the dashboard.&quot;}"><div class="Checkbox " data-reactid=".2p"><div class="checkbox-holder" data-reactid=".2p.0"><div class="chkbox checked" style="display:none;" data-reactid=".2p.0.0"><i class="icon-ok" data-reactid=".2p.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2p.0.1"><i class="icon-ok" data-reactid=".2p.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2p.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2p.1">Open up your Firebase Forge (the <code>FirebaseUrl</code> constant in <code>app/app.js</code>) and add the following rules under the Security &amp; Rules section of the dashboard.</div></div></div><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"rules"</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">".read"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"users"</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">"$uid"</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">".write"</span><span class="o">:</span> <span class="s2">"auth !== null &amp;&amp; $uid === auth.uid"</span><span class="p">,</span>
        <span class="s2">"displayName"</span><span class="o">:</span><span class="p">{</span>
          <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.exists() &amp;&amp; newData.val().length &gt; 0"</span>
        <span class="p">},</span>
        <span class="s2">"online"</span><span class="o">:</span><span class="p">{</span>
          <span class="s2">"$connectionId"</span><span class="o">:</span><span class="p">{</span>
            <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.isBoolean()"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"channels"</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">"$channelId"</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">".write"</span><span class="o">:</span> <span class="s2">"auth !== null"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="o">:</span><span class="p">{</span>
          <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.exists() &amp;&amp; newData.isString() &amp;&amp; newData.val().length &gt; 0"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"channelMessages"</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">"$channelId"</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">"$messageId"</span><span class="o">:</span><span class="p">{</span>
          <span class="s2">".write"</span><span class="o">:</span> <span class="s2">"auth !== null &amp;&amp; newData.child('uid').val() === auth.uid"</span><span class="p">,</span>
          <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.child('timestamp').exists()"</span><span class="p">,</span>
          <span class="s2">"body"</span><span class="o">:</span><span class="p">{</span>
            <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.exists() &amp;&amp; newData.val().length &gt; 0"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"userMessages"</span><span class="o">:</span><span class="p">{</span>
      <span class="s2">"$uid1"</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">"$uid2"</span><span class="o">:</span><span class="p">{</span>
          <span class="s2">"$messageId"</span><span class="o">:</span><span class="p">{</span>
            <span class="s2">".read"</span><span class="o">:</span> <span class="s2">"auth !== null &amp;&amp; ($uid1 === auth.uid || $uid2 === auth.uid)"</span><span class="p">,</span>
            <span class="s2">".write"</span><span class="o">:</span> <span class="s2">"auth !== null &amp;&amp; newData.child('uid').val() === auth.uid"</span><span class="p">,</span>
            <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"$uid1 &lt; $uid2 &amp;&amp; newData.child('timestamp').exists()"</span><span class="p">,</span>
            <span class="s2">"body"</span><span class="o">:</span><span class="p">{</span>
              <span class="s2">".validate"</span><span class="o">:</span> <span class="s2">"newData.exists() &amp;&amp; newData.val().length &gt; 0"</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div><div class="course-section" id="deploying-to-firebase"><h1>Deploying to Firebase</h1><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;install firebase tools&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003enpm install -g firebase-tools\u003c/code\u003e to install the Firebase command line tool&quot;}"><div class="Checkbox " data-reactid=".2q"><div class="checkbox-holder" data-reactid=".2q.0"><div class="chkbox checked" style="display:none;" data-reactid=".2q.0.0"><i class="icon-ok" data-reactid=".2q.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2q.0.1"><i class="icon-ok" data-reactid=".2q.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2q.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2q.1">Run <code>npm install -g firebase-tools</code> to install the Firebase command line tool</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;create firebase json&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;In the root of your codebase, create the following file named \u003ccode\u003efirebase.json\u003c/code\u003e, filling in the name of your Firebase:&quot;}"><div class="Checkbox " data-reactid=".2r"><div class="checkbox-holder" data-reactid=".2r.0"><div class="chkbox checked" style="display:none;" data-reactid=".2r.0.0"><i class="icon-ok" data-reactid=".2r.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2r.0.1"><i class="icon-ok" data-reactid=".2r.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2r.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2r.1">In the root of your codebase, create the following file named <code>firebase.json</code>, filling in the name of your Firebase:</div></div></div><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"firebase"</span><span class="o">:</span> <span class="s2">"firebase-name-here"</span><span class="p">,</span>
  <span class="s2">"public"</span><span class="o">:</span> <span class="s2">"dist"</span>
<span class="p">}</span>
</pre></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;run grunt build&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003egrunt build\u003c/code\u003e to build a production-ready version of our application into the \u003ccode\u003edist\u003c/code\u003e folder&quot;}"><div class="Checkbox " data-reactid=".2s"><div class="checkbox-holder" data-reactid=".2s.0"><div class="chkbox checked" style="display:none;" data-reactid=".2s.0.0"><i class="icon-ok" data-reactid=".2s.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2s.0.1"><i class="icon-ok" data-reactid=".2s.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2s.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2s.1">Run <code>grunt build</code> to build a production-ready version of our application into the <code>dist</code> folder</div></div></div><div data-react-class="Course.Checkbox" data-react-props="{&quot;checkboxSlug&quot;:&quot;run firebase deploy&quot;,&quot;courseSlug&quot;:&quot;angularfire-slack-tutorial&quot;,&quot;content&quot;:&quot;Run \u003ccode\u003efirebase deploy\u003c/code\u003e in the root of your codebase.&quot;}"><div class="Checkbox " data-reactid=".2t"><div class="checkbox-holder" data-reactid=".2t.0"><div class="chkbox checked" style="display:none;" data-reactid=".2t.0.0"><i class="icon-ok" data-reactid=".2t.0.0.0"></i></div><div class="chkbox unchecked" style="display:block;" data-reactid=".2t.0.1"><i class="icon-ok" data-reactid=".2t.0.1.0"></i></div><div class="tooltip" style="display:none;" data-reactid=".2t.0.2">Use checkboxes to save your progress</div></div><div class="checkbox-content" data-reactid=".2t.1">Run <code>firebase deploy</code> in the root of your codebase.</div></div></div><p><code>firebase deploy</code> may prompt you to log in, but afterwards it should push your
application to Firebase's hosting service. Now if you visit
https://firebase-name-here.firebaseapp.com/ you should see our completed app,
ready for the world to use!</p></div>
      </div>
    </div>

    <div id="course-end" class="course-footer">
      <div class="row">

        <div class="five columns offset-by-one">
          <div class="nl-subscribe">
            <h5>Stay on the bleeding edge of your favorite technologies.</h5>
            <p>Enter your email to receive courses on AngularJS, Node, Android, Swift and more. 1-2 emails per week, no spam.</p>
            <div data-react-class="Course.EmailCapture" data-react-props="{}"><div data-reactid=".2u"></div></div>
          </div>
        </div>

        <div class="five columns">
          <h5 class="share-header">
            Did you like this course? Share it!
          </h5>
          <div class="share-btns">
            <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fthinkster.io%2Fangularfire-slack-tutorial%2F" class="btn facebook" target="_blank">
              <i class="ion-social-facebook"></i>
            </a>
            <a href="https://twitter.com/intent/tweet?text=Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire&amp;url=https%3A%2F%2Fthinkster.io%2Fangularfire-slack-tutorial%2F&amp;related=gothinkster,angulartutorial" class="btn twitter" target="_blank">
              <i class="ion-social-twitter"></i>
            </a>
            <a href="https://plus.google.com/share?url=https%3A%2F%2Fthinkster.io%2Fangularfire-slack-tutorial%2F" class="btn google" target="_blank">
              <i class="ion-social-googleplus"></i>
            </a>
          </div>
        </div>

      </div>

      <div class="row theres-more">
        <h5>
          <a href="https://thinkster.io/topics/firebase">
          <img src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/firebase-53aea73bfceebb876e718d35fb1c711d2aa4006b2beb63786a7.png" alt="Firebase 53aea73bfceebb876e718d35fb1c711d2aa4006b2beb63786a72be87332d9b15" border="0">
          There's more to learn! <span>Check out our latest Firebase courses&nbsp;&nbsp;<i class="ion-android-arrow-forward"></i></span>
          </a>
        </h5>
      </div>
    </div>


  </div>

  <script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/E-v1.js" charset="ISO-8859-1"></script>


</div>
<div class="clearfix"></div>


<div class="footer">
  <div class="container">
    <div class="row">

      <div class="six columns offset-by-one sharer">
        Help us educate millions of people around the world for free&nbsp;&nbsp;<i class="ion-heart heart"></i>
        <div data-react-class="Global.FollowButton" data-react-props="{}"><iframe src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/follow_button_002.html" scrolling="no" allowtransparency="true" class="FollowButton " data-reactid=".2v" frameborder="0" height="30" width="190"></iframe></div>
      </div>

      <div class="four columns map">
        <div class="links">
          <a href="https://thinkster.io/">Home</a>
          <a href="https://thinkster.io/#start-learning">Topics</a>
          <a href="https://thinkster.io/pro">Pro</a>
          <a href="https://thinkster.io/about">About</a>
          <a href="mailto:hello@thinkster.io">Contact Us</a>
        </div>
        <div class="legal">
        <span class="copy"> 2015 Thinkster</span>
        <a href="https://thinkster.io/privacy-policy">Privacy Policy</a> | <a href="https://thinkster.io/tos">Terms of Use</a>
        </div>
      </div>

    </div>
  </div>
</div>

<div data-react-class="Global.Modal" data-react-props="{}"><noscript data-reactid=".2w"></noscript></div>
<div data-react-class="Global.Snackbar" data-react-props="{}"><noscript data-reactid=".2x"></noscript></div>

<script type="text/javascript" async="">
/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
olark.identify('3072-944-10-8033');
/*]]>*/
olark.configure('system.is_single_page_application', true);
!function(){function e(){for(var e=document.getElementById("habla_beta_container_do_not_rely_on_div_classes_or_names"),n=null,a=null,t=document.getElementsByTagName("iframe"),o=0;o<t.length;o++){var r=t[o];r&&r.id&&(r.id.match(/olark-loader/)?r.parentElement&&(n=r.parentElement.parentElement):r.id.match(/olark_framesocket/)&&r.parentElement&&(a=r.parentElement))}return[e,n,a]}var n;document.addEventListener("page:before-unload",function(){n=e()}),document.addEventListener("page:change",function(){if(olark("/"===window.location.pathname?"api.box.hide":"api.box.show"),n)for(var e=document.getElementsByTagName("body")[0],a=0;a<n.length;a++)e.appendChild(n[a])}),"/"===window.location.pathname&&olark.configure("box.start_hidden",!0)}();
</script>



<script id="" type="text/javascript">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","//connect.facebook.net/en_US/fbevents.js");fbq("init","417778941754366");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=417778941754366&amp;ev=PageView&amp;noscript=1"></noscript>
<script src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/oct.js" id="" type="text/javascript"></script>
<script id="" type="text/javascript">twttr.conversion.trackPid("nu74c",{tw_sale_amount:0,tw_order_quantity:0});</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=nu74c&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0">
<img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=nu74c&amp;p_id=Twitter&amp;tw_sale_amount=0&amp;tw_order_quantity=0">
</noscript><span style="display: none;"><iframe src="Learn%20to%20build%20a%20Real-Time%20Slack%20clone%20with%20AngularFire%20-%20Thinkster_files/storage.html" id="_olark_framesocket18488" style="display: none !important;"></iframe></span><div class="habla-browser-firefox habla-desktop olrk-noquirks" id="habla_beta_container_do_not_rely_on_div_classes_or_names"><div class="olrk-away" id="hbl_operator_state_div"><div class="olrk-normal" id="hbl_region"><div class=" olrk-state-compressed" id="habla_window_state_div"><div class="habla_window_div_base hbl_pal_main_width olrk-fixed-bottom olrk-fixed-right " style="margin: 0px 20px; bottom: 0px; right: 0px; display: none; position: fixed;" id="habla_window_div"><div style="display: block;" id="habla_compressed_div"></div><div class="habla_panel_border hbl_pal_main_bg hbl_pal_panel_border hbl_pal_main_font_family hbl_pal_main_font_size " style="display: block;" id="habla_panel_div"><div style="display: block;" id="habla_both_div"><div class="habla_topbar_div_normal hbl_pal_title_fg hbl_pal_title_bg habla_topbar_div_compressed " id="habla_topbar_div"><a class="habla_button habla_button_a_normal hbl_pal_header_font_size hbl_pal_main_font_family hbl_pal_button_bg hbl_pal_button_fg " id="habla_sizebutton_a">^</a><a class="habla_oplink_a_normal hbl_pal_header_font_size hbl_pal_title_fg " id="habla_oplink_a">Feedback, questions, ideas?</a></div></div><div style="display: none;" id="habla_expanded_div"><div id="habla_middle_div"><div id="habla_middle_wrapper_div"><div class="hbl_panel habla_conversation_div hbl_pal_main_height hbl_pal_control_border hbl_pal_main_fg hbl_pal_main_bg   habla_conversation_message_on " style="height: 150px; overflow: hidden; display: none;" id="habla_conversation_div"><span id="hbl_body_message">We'd love to chat with you!</span></div><div class="hbl_panel habla_offline_message_sent_div hbl_pal_main_height hbl_pal_control_border hbl_pal_main_fg " style="display: none;" id="habla_offline_message_sent_div">Thanks for your message!  We'll get back to you shortly.</div><div class="hbl_panel habla_offline_message_div hbl_pal_control_border hbl_pal_main_fg " style="display: block;" id="habla_offline_message_div"><span id="habla_offline_message_span">Let us know what's on your mind - it's super important to us!</span><div class="hbl_txt_wrapper"><textarea placeholder="&lt;click here&gt; and type your Name" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 20px; display: block;" name="habla_name_input" id="habla_name_input"></textarea></div><div class="hbl_txt_wrapper"><textarea placeholder="&lt;click here&gt; and type your Email" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 20px; display: block;" name="habla_offline_email_input" id="habla_offline_email_input"></textarea></div><div class="hbl_txt_wrapper"><textarea placeholder="We're not around but we still want to hear from you!  Leave us a note:" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 65px; display: block;" name="habla_offline_body_input" id="habla_offline_body_input"></textarea></div><span class="habla_offline_error_span " id="habla_offline_error_span"></span><input style="display: block;" value="Send" class="habla_offline_submit_input hbl_pal_offline_submit_fg hbl_pal_control_border hbl_pal_offline_submit_bg " name="habla_offline_submit_input" id="habla_offline_submit_input" type="submit"><div class="clear_style " id="habla_offline_clear_div"></div></div><div class="hbl_panel habla_pre_chat_div hbl_pal_main_height hbl_pal_main_fg " style="display: none; height: 150px;" id="habla_pre_chat_div"><span id="habla_pre_chat_span">Hi, I am around, click 'start chatting' to contact me.</span><div class="hbl_txt_wrapper"><textarea placeholder="&lt;click here&gt; and type your Name" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 20px; line-height: 20px;" name="habla_pre_chat_name_input" id="habla_pre_chat_name_input"></textarea></div><div class="hbl_txt_wrapper"><textarea placeholder="&lt;click here&gt; and type your Email" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 20px; line-height: 20px;" name="habla_pre_chat_email_input" id="habla_pre_chat_email_input"></textarea></div><div style="display: none;" class="hbl_txt_wrapper"><textarea placeholder="&lt;click here&gt; and type your Phone" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="height: 20px; line-height: 20px; display: none;" name="habla_pre_chat_phone_input" id="habla_pre_chat_phone_input"></textarea></div><span id="habla_pre_chat_error_span"></span><input value="Click here to start chatting" class="habla_pre_chat_form_field habla_offline_submit_input hbl_pal_offline_submit_fg hbl_pal_control_border hbl_pal_offline_submit_bg " name="habla_pre_chat_submit_input" id="habla_pre_chat_submit_input" type="submit"><div class="clear_style " id="habla_pre_chat_clear_div"></div></div></div><form style="display: none;" class="habla_chatform_form " autocomplete="off" method="GET" action="#" id="habla_chatform_form"><div class="habla_input_div " id="habla_input_div"><div class="hbl_txt_wrapper"><textarea disabled="disabled" placeholder="Type here and hit &lt;enter&gt; to chat" class="habla_wcsend_field habla_wcsend_input_pre habla_wcsend_input_normal hbl_pal_input_pre_fg hbl_pal_main_font_family hbl_pal_input_font_size hbl_pal_control_border " style="line-height: 20px; height: 20px; display: none;" size="undefined" name="habla_wcsend_input" id="habla_wcsend_input"></textarea></div></div></form></div><div><div id="olk-b-6646" data-reactid=".0"><div class="wrapper-olk-316" style="display:none;" data-reactid=".0.0"><p class="description-olk-316" data-reactid=".0.0.0">10,000+ companies rely on Olark software to chat with customers directly.</p><button class="cancel-button-olk-316" data-reactid=".0.0.1">Go back</button><button class="referral-button-olk-316" data-reactid=".0.0.2">Try Olark on your site</button></div><a class="brand-olk-316" href="http://olark.com/" data-reactid=".0.1">Powered by Olark</a></div></div></div></div><div style="display: none;" id="habla_closed_div"></div></div></div></div></div></div></body></html>